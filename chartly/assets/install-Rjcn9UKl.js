import{gF as e,_ as t,e as n,B as o,gG as i,c3 as r,b2 as a,c4 as s,gH as l,gI as u,a3 as c,f as p,T as h,p as d,a4 as f,gJ as g,R as v,cJ as m,ar as y,k as _,ah as x,aM as b,b8 as M,gK as S,aj as w,a8 as T,gL as C,av as A,au as I,bk as R,gM as O,cT as D,gN as V,gO as L,gP as z,gQ as k,aa as P,e1 as N,K as F,cw as G,L as E,aE as B,cr as H,j as Z,V as X,U as Y,aD as W,aR as U,bX as j,bS as J,aq as K,Z as q,aF as $,cL as Q,as as ee,bA as te,b9 as ne,ac as oe,i as ie,S as re,v as ae,gR as se,bm as le,bF as ue,aA as ce,gS as pe,c0 as he,gT as de,gU as fe,q as ge,bb as ve,cp as me,dj as ye,b1 as _e,bL as xe,g as be,af as Me,bN as Se,gV as we,ds as Te,gW as Ce,ap as Ae,cv as Ie,ao as Re,b$ as Oe,b_ as De,gX as Ve,o as Le,gY as ze,bY as ke,gZ as Pe,g_ as Ne,g$ as Fe,aI as Ge,bO as Ee,bP as Be,bv as He,ad as Ze,dq as Xe,h0 as Ye,bh as We,h1 as Ue,Y as je,bz as Je,h2 as Ke,h3 as qe,ab as $e,$ as Qe,h4 as et,h5 as tt,h6 as nt,al as ot,h7 as it,h8 as rt,cC as at,bV as st,h9 as lt,ha as ut,hb as ct,bp as pt,hc as ht,ae as dt,bt as ft,bw as gt,cz as vt,N as mt,hd as yt,bI as _t,he as xt,cu as bt,co as Mt,ce as St,cg as wt,c_ as Tt,hf as Ct,hg as At,br as It,ci as Rt,hh as Ot,cl as Dt,bx as Vt,by as Lt,bH as zt,hi as kt,hj as Pt,cP as Nt}from"./index-2QljyzrB.js";function Ft(e,t){return Math.abs(e-t)<1e-8}function Gt(t,n,o){var i=0,r=t[0];if(!r)return!1;for(var a=1;a<t.length;a++){var s=t[a];i+=e(r[0],r[1],s[0],s[1],n,o),r=s}var l=t[0];return Ft(r[0],l[0])&&Ft(r[1],l[1])||(i+=e(r[0],r[1],l[0],l[1],n,o)),0!==i}var Et=[];function Bt(e,t){for(var n=0;n<e.length;n++)s(e[n],e[n],t)}function Ht(e,t,n,o){for(var i=0;i<e.length;i++){var r=e[i];o&&(r=o.project(r)),r&&isFinite(r[0])&&isFinite(r[1])&&(l(t,t,r),u(n,n,r))}}var Zt=function(){function e(e){this.name=e}return e.prototype.setCenter=function(e){this._center=e},e.prototype.getCenter=function(){var e=this._center;return e||(e=this._center=this.calcCenter()),e},e}(),Xt=function(){return function(e,t){this.type="polygon",this.exterior=e,this.interiors=t}}(),Yt=function(){return function(e){this.type="linestring",this.points=e}}(),Wt=function(e){function i(t,n,o){var i=e.call(this,t)||this;return i.type="geoJSON",i.geometries=n,i._center=o&&[o[0],o[1]],i}return t(i,e),i.prototype.calcCenter=function(){for(var e,t=this.geometries,n=0,o=0;o<t.length;o++){var i=t[o],r=i.exterior,a=r&&r.length;a>n&&(e=i,n=a)}if(e)return function(e){for(var t=0,n=0,o=0,i=e.length,r=e[i-1][0],a=e[i-1][1],s=0;s<i;s++){var l=e[s][0],u=e[s][1],c=r*u-l*a;t+=c,n+=(r+l)*c,o+=(a+u)*c,r=l,a=u}return t?[n/t/3,o/t/3,t]:[e[0][0]||0,e[0][1]||0]}(e.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},i.prototype.getBoundingRect=function(e){var t=this._rect;if(t&&!e)return t;var i=[1/0,1/0],r=[-1/0,-1/0],a=this.geometries;return n(a,(function(t){"polygon"===t.type?Ht(t.exterior,i,r,e):n(t.points,(function(t){Ht(t,i,r,e)}))})),isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])||(i[0]=i[1]=r[0]=r[1]=0),t=new o(i[0],i[1],r[0]-i[0],r[1]-i[1]),e||(this._rect=t),t},i.prototype.contain=function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var o=0,i=n.length;o<i;o++){var r=n[o];if("polygon"===r.type){var a=r.exterior,s=r.interiors;if(Gt(a,e[0],e[1])){for(var l=0;l<(s?s.length:0);l++)if(Gt(s[l],e[0],e[1]))continue e;return!0}}}return!1},i.prototype.transformTo=function(e,t,i,r){var a=this.getBoundingRect(),s=a.width/a.height;i?r||(r=i/s):i=s*r;for(var l=new o(e,t,i,r),u=a.calculateTransform(l),c=this.geometries,p=0;p<c.length;p++){var h=c[p];"polygon"===h.type?(Bt(h.exterior,u),n(h.interiors,(function(e){Bt(e,u)}))):n(h.points,(function(e){Bt(e,u)}))}(a=this._rect).copy(l),this._center=[a.x+a.width/2,a.y+a.height/2]},i.prototype.cloneShallow=function(e){null==e&&(e=this.name);var t=new i(e,this.geometries,this._center);return t._rect=this._rect,t.transformTo=null,t},i}(Zt),Ut=function(e){function n(t,n){var o=e.call(this,t)||this;return o.type="geoSVG",o._elOnlyForCalculate=n,o}return t(n,e),n.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,t=e.getBoundingRect(),n=[t.x+t.width/2,t.y+t.height/2],o=i(Et),l=e;l&&!l.isGeoSVGGraphicRoot;)r(o,l.getLocalTransform(),o),l=l.parent;return a(o,o),s(n,n,o),n},n}(Zt);function jt(e,t,n){for(var o=0;o<e.length;o++)e[o]=Jt(e[o],t[o],n)}function Jt(e,t,n){for(var o=[],i=t[0],r=t[1],a=0;a<e.length;a+=2){var s=e.charCodeAt(a)-64,l=e.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),i=s+=i,r=l+=r,o.push([s/n,l/n])}return o}function Kt(e,t){return e=function(e){if(!e.UTF8Encoding)return e;var t=e,o=t.UTF8Scale;null==o&&(o=1024);var i=t.features;return n(i,(function(e){var t=e.geometry,i=t.encodeOffsets,r=t.coordinates;if(i)switch(t.type){case"LineString":t.coordinates=Jt(r,i,o);break;case"Polygon":case"MultiLineString":jt(r,i,o);break;case"MultiPolygon":n(r,(function(e,t){return jt(e,i[t],o)}))}})),t.UTF8Encoding=!1,t}(e),c(p(e.features,(function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0})),(function(e){var o=e.properties,i=e.geometry,r=[];switch(i.type){case"Polygon":var a=i.coordinates;r.push(new Xt(a[0],a.slice(1)));break;case"MultiPolygon":n(i.coordinates,(function(e){e[0]&&r.push(new Xt(e[0],e.slice(1)))}));break;case"LineString":r.push(new Yt([i.coordinates]));break;case"MultiLineString":r.push(new Yt(i.coordinates))}var s=new Wt(o[t||"name"],r,o.cp);return s.properties=o,s}))}function qt(e,t,n){var o=e.target;o.x+=t,o.y+=n,o.dirty()}function $t(e,t,n,o){var i=e.target,r=e.zoomLimit,a=e.zoom=e.zoom||1,s=(a=on(a*=t,r))/e.zoom;e.zoom=a,nn(i,n,o,s),i.dirty()}function Qt(e,t,n,i,r,a){var s=new o(0,0,0,0);i.enable(e.get("roam"),{api:t,zInfo:{component:e},triggerInfo:{roamTrigger:e.get("roamTrigger"),isInSelf:function(e,t,o){return s.copy(n.getBoundingRect()),s.applyTransform(n.getComputedTransform()),s.contain(t,o)},isInClip:function(e,t,n){return!a||a.contain(t,n)}}}),r.zoomLimit=e.get("scaleLimit");var l=e.coordinateSystem;r.zoom=l?l.getZoom():1;var u=e.subType+"Roam";i.off("pan").off("zoom").on("pan",(function(n){qt(r,n.dx,n.dy),t.dispatchAction({seriesId:e.id,type:u,dx:n.dx,dy:n.dy})})).on("zoom",(function(n){$t(r,n.scale,n.originX,n.originY),t.dispatchAction({seriesId:e.id,type:u,zoom:n.scale,originX:n.originX,originY:n.originY}),t.updateLabelLayout()}))}function en(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function tn(e,t,n){var o=e.getZoom(),i=e.getCenter(),r=t.zoom,a=e.projectedToPoint?e.projectedToPoint(i):e.dataToPoint(i);return null!=t.dx&&null!=t.dy&&(a[0]-=t.dx,a[1]-=t.dy,e.setCenter(en(e,a))),null!=r&&(r=on(o*r,n)/o,nn(e,t.originX,t.originY,r),e.updateTransform(),e.setCenter(en(e,a)),e.setZoom(r*o)),{center:e.getCenter(),zoom:e.getZoom()}}function nn(e,t,n,o){e.x-=(t-e.x)*(o-1),e.y-=(n-e.y)*(o-1),e.scaleX*=o,e.scaleY*=o}function on(e,t){if(t){var n=t.min||0,o=t.max||1/0;e=Math.max(Math.min(o,e),n)}return e}var rn,an=s,sn=function(e){function n(t,n){var o=e.call(this)||this;return o.type="view",o.dimensions=["x","y"],o._roamTransformable=new h,o._rawTransformable=new h,o.name=t,o._opt=n,o}return t(n,e),n.prototype.setBoundingRect=function(e,t,n,i){return this._rect=new o(e,t,n,i),this._updateCenterAndZoom(),this._rect},n.prototype.getBoundingRect=function(){return this._rect},n.prototype.setViewRect=function(e,t,n,i){this._transformTo(e,t,n,i),this._viewRect=new o(e,t,n,i)},n.prototype._transformTo=function(e,t,n,i){var r=this.getBoundingRect(),a=this._rawTransformable;a.transform=r.calculateTransform(new o(e,t,n,i));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,this._updateTransform()},n.prototype.setCenter=function(e){var t=this._opt;t&&t.api&&t.ecModel&&t.ecModel.getShallow("legacyViewCoordSysCenterBase")&&e&&(e=[d(e[0],t.api.getWidth()),d(e[1],t.api.getWidth())]),this._centerOption=f(e),this._updateCenterAndZoom()},n.prototype.setZoom=function(e){this._zoom=on(e||1,this.zoomLimit),this._updateCenterAndZoom()},n.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},n.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},n.prototype.getZoom=function(){return this._zoom||1},n.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},n.prototype._updateCenterAndZoom=function(){var e=this._centerOption,t=this._rect;e&&t&&(this._center=[d(e[0],t.width,t.x),d(e[1],t.height,t.y)]);var n=this._rawTransformable.getLocalTransform(),o=this._roamTransformable,i=this.getDefaultCenter(),r=this.getCenter(),a=this.getZoom();r=s([],r,n),i=s([],i,n),o.originX=r[0],o.originY=r[1],o.x=i[0]-r[0],o.y=i[1]-r[1],o.scaleX=o.scaleY=a,this._updateTransform()},n.prototype._updateTransform=function(){var e=this._roamTransformable,t=this._rawTransformable;t.parent=e,e.updateTransform(),t.updateTransform(),g(this.transform||(this.transform=[]),t.transform||v()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],a(this.invTransform,this.transform),this.decomposeTransform()},n.prototype.getTransformInfo=function(){var e=this._rawTransformable,t=this._roamTransformable,n=new h;return n.transform=t.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},n.prototype.getViewRect=function(){return this._viewRect},n.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},n.prototype.dataToPoint=function(e,t,n){var o=t?this._rawTransform:this.transform;return n=n||[],o?an(n,e,o):m(n,e)},n.prototype.pointToData=function(e,t,n){n=n||[];var o=this.invTransform;return o?an(n,e,o):(n[0]=e[0],n[1]=e[1],n)},n.prototype.convertToPixel=function(e,t,n){var o=ln(t);return o===this?o.dataToPoint(n):null},n.prototype.convertFromPixel=function(e,t,n){var o=ln(t);return o===this?o.pointToData(n):null},n.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},n.dimensions=["x","y"],n}(h);function ln(e){var t=e.seriesModel;return t?t.coordinateSystem:null}function un(e){y(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));var t=e;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var cn={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},pn=_(cn),hn={"alignment-baseline":"textBaseline","stop-color":"stopColor"},dn=_(hn),fn=function(){function e(){this._defs={},this._root=null}return e.prototype.parse=function(e,t){t=t||{};var n=un(e);this._defsUsePending=[];var o=new x;this._root=o;var i=[],r=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||t.width),s=parseFloat(n.getAttribute("height")||t.height);isNaN(a)&&(a=null),isNaN(s)&&(s=null),xn(n,o,null,!0,!1);for(var l,u,c=n.firstChild;c;)this._parseNode(c,o,i,null,!1,!1),c=c.nextSibling;if(function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o[0].style[o[1]]=e[o[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],r){var p=wn(r);p.length>=4&&(l={x:parseFloat(p[0]||0),y:parseFloat(p[1]||0),width:parseFloat(p[2]),height:parseFloat(p[3])})}if(l&&null!=a&&null!=s&&(u=Rn(l,{x:0,y:0,width:a,height:s}),!t.ignoreViewBox)){var h=o;(o=new x).add(h),h.scaleX=h.scaleY=u.scale,h.x=u.x,h.y=u.y}return t.ignoreRootClip||null==a||null==s||o.setClipPath(new b({shape:{x:0,y:0,width:a,height:s}})),{root:o,width:a,height:s,viewBoxRect:l,viewBoxTransform:u,named:i}},e.prototype._parseNode=function(e,t,n,o,i,r){var a,s=e.nodeName.toLowerCase(),l=o;if("defs"===s&&(i=!0),"text"===s&&(r=!0),"defs"===s||"switch"===s)a=t;else{if(!i){var u=rn[s];if(u&&M(rn,s)){a=u.call(this,e,t);var c=e.getAttribute("name");if(c){var p={name:c,namedFrom:null,svgNodeTagLower:s,el:a};n.push(p),"g"===s&&(l=p)}else o&&n.push({name:o.name,namedFrom:o,svgNodeTagLower:s,el:a});t.add(a)}}var h=gn[s];if(h&&M(gn,s)){var d=h.call(this,e),f=e.getAttribute("id");f&&(this._defs[f]=d)}}if(a&&a.isGroup)for(var g=e.firstChild;g;)1===g.nodeType?this._parseNode(g,a,n,l,i,r):3===g.nodeType&&r&&this._parseText(g,a),g=g.nextSibling},e.prototype._parseText=function(e,t){var n=new S({style:{text:e.textContent},silent:!0,x:this._textX||0,y:this._textY||0});yn(t,n),xn(e,n,this._defsUsePending,!1,!1),function(e,t){var n=t.__selfStyle;if(n){var o=n.textBaseline,i=o;o&&"auto"!==o?"baseline"===o?i="alphabetic":"before-edge"===o||"text-before-edge"===o?i="top":"after-edge"===o||"text-after-edge"===o?i="bottom":"central"!==o&&"mathematical"!==o||(i="middle"):i="alphabetic",e.style.textBaseline=i}var r=t.__inheritedStyle;if(r){var a=r.textAlign,s=a;a&&("middle"===a&&(s="center"),e.style.textAlign=s)}}(n,t);var o=n.style,i=o.fontSize;i&&i<9&&(o.fontSize=9,n.scaleX*=i/9,n.scaleY*=i/9);var r=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=r;var a=n.getBoundingRect();return this._textX+=a.width,t.add(n),n},e.internalField=void(rn={g:function(e,t){var n=new x;return yn(t,n),xn(e,n,this._defsUsePending,!1,!1),n},rect:function(e,t){var n=new b;return yn(t,n),xn(e,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(e.getAttribute("x")||"0"),y:parseFloat(e.getAttribute("y")||"0"),width:parseFloat(e.getAttribute("width")||"0"),height:parseFloat(e.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(e,t){var n=new w;return yn(t,n),xn(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),r:parseFloat(e.getAttribute("r")||"0")}),n.silent=!0,n},line:function(e,t){var n=new T;return yn(t,n),xn(e,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(e.getAttribute("x1")||"0"),y1:parseFloat(e.getAttribute("y1")||"0"),x2:parseFloat(e.getAttribute("x2")||"0"),y2:parseFloat(e.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(e,t){var n=new C;return yn(t,n),xn(e,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(e.getAttribute("cx")||"0"),cy:parseFloat(e.getAttribute("cy")||"0"),rx:parseFloat(e.getAttribute("rx")||"0"),ry:parseFloat(e.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(e,t){var n,o=e.getAttribute("points");o&&(n=_n(o));var i=new A({shape:{points:n||[]},silent:!0});return yn(t,i),xn(e,i,this._defsUsePending,!1,!1),i},polyline:function(e,t){var n,o=e.getAttribute("points");o&&(n=_n(o));var i=new I({shape:{points:n||[]},silent:!0});return yn(t,i),xn(e,i,this._defsUsePending,!1,!1),i},image:function(e,t){var n=new R;return yn(t,n),xn(e,n,this._defsUsePending,!1,!1),n.setStyle({image:e.getAttribute("xlink:href")||e.getAttribute("href"),x:+e.getAttribute("x"),y:+e.getAttribute("y"),width:+e.getAttribute("width"),height:+e.getAttribute("height")}),n.silent=!0,n},text:function(e,t){var n=e.getAttribute("x")||"0",o=e.getAttribute("y")||"0",i=e.getAttribute("dx")||"0",r=e.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(i),this._textY=parseFloat(o)+parseFloat(r);var a=new x;return yn(t,a),xn(e,a,this._defsUsePending,!1,!0),a},tspan:function(e,t){var n=e.getAttribute("x"),o=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=o&&(this._textY=parseFloat(o));var i=e.getAttribute("dx")||"0",r=e.getAttribute("dy")||"0",a=new x;return yn(t,a),xn(e,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(r),a},path:function(e,t){var n=e.getAttribute("d")||"",o=O(n);return yn(t,o),xn(e,o,this._defsUsePending,!1,!1),o.silent=!0,o}}),e}(),gn={lineargradient:function(e){var t=parseInt(e.getAttribute("x1")||"0",10),n=parseInt(e.getAttribute("y1")||"0",10),o=parseInt(e.getAttribute("x2")||"10",10),i=parseInt(e.getAttribute("y2")||"0",10),r=new D(t,n,o,i);return vn(e,r),mn(e,r),r},radialgradient:function(e){var t=parseInt(e.getAttribute("cx")||"0",10),n=parseInt(e.getAttribute("cy")||"0",10),o=parseInt(e.getAttribute("r")||"0",10),i=new V(t,n,o);return vn(e,i),mn(e,i),i}};function vn(e,t){"userSpaceOnUse"===e.getAttribute("gradientUnits")&&(t.global=!0)}function mn(e,t){for(var n=e.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var o=n.getAttribute("offset"),i=void 0;i=o&&o.indexOf("%")>0?parseInt(o,10)/100:o?parseFloat(o):0;var r={};In(n,r,r);var a=r.stopColor||n.getAttribute("stop-color")||"#000000",s=r.stopOpacity||n.getAttribute("stop-opacity");if(s){var l=L(a);l&&l[3]&&(l[3]*=z(s),a=k(l,"rgba"))}t.colorStops.push({offset:i,color:a})}n=n.nextSibling}}function yn(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),P(t.__inheritedStyle,e.__inheritedStyle))}function _n(e){for(var t=wn(e),n=[],o=0;o<t.length;o+=2){var i=parseFloat(t[o]),r=parseFloat(t[o+1]);n.push([i,r])}return n}function xn(e,t,o,i,a){var s=t,l=s.__inheritedStyle=s.__inheritedStyle||{},u={};1===e.nodeType&&(function(e,t){var n=e.getAttribute("transform");if(n){n=n.replace(/,/g," ");var o=[],i=null;n.replace(Tn,(function(e,t,n){return o.push(t,n),""}));for(var a=o.length-1;a>0;a-=2){var s=o[a],l=o[a-1],u=wn(s);switch(i=i||v(),l){case"translate":E(i,i,[parseFloat(u[0]),parseFloat(u[1]||"0")]);break;case"scale":G(i,i,[parseFloat(u[0]),parseFloat(u[1]||u[0])]);break;case"rotate":F(i,i,-parseFloat(u[0])*Cn,[parseFloat(u[1]||"0"),parseFloat(u[2]||"0")]);break;case"skewX":var c=Math.tan(parseFloat(u[0])*Cn);r(i,[1,0,c,1,0,0],i);break;case"skewY":var p=Math.tan(parseFloat(u[0])*Cn);r(i,[1,p,0,1,0,0],i);break;case"matrix":i[0]=parseFloat(u[0]),i[1]=parseFloat(u[1]),i[2]=parseFloat(u[2]),i[3]=parseFloat(u[3]),i[4]=parseFloat(u[4]),i[5]=parseFloat(u[5])}}t.setLocalTransform(i)}}(e,t),In(e,l,u),i||function(e,t,n){for(var o=0;o<pn.length;o++){var i=pn[o];null!=(r=e.getAttribute(i))&&(t[cn[i]]=r)}for(o=0;o<dn.length;o++){var r;i=dn[o];null!=(r=e.getAttribute(i))&&(n[hn[i]]=r)}}(e,l,u)),s.style=s.style||{},null!=l.fill&&(s.style.fill=Mn(s,"fill",l.fill,o)),null!=l.stroke&&(s.style.stroke=Mn(s,"stroke",l.stroke,o)),n(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(e){null!=l[e]&&(s.style[e]=parseFloat(l[e]))})),n(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(e){null!=l[e]&&(s.style[e]=l[e])})),a&&(s.__selfStyle=u),l.lineDash&&(s.style.lineDash=c(wn(l.lineDash),(function(e){return parseFloat(e)}))),"hidden"!==l.visibility&&"collapse"!==l.visibility||(s.invisible=!0),"none"===l.display&&(s.ignore=!0)}var bn=/^url\(\s*#(.*?)\)/;function Mn(e,t,n,o){var i=n&&n.match(bn);if(!i)return"none"===n&&(n=null),n;var r=N(i[1]);o.push([e,t,r])}var Sn=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function wn(e){return e.match(Sn)||[]}var Tn=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,Cn=Math.PI/180;var An=/([^\s:;]+)\s*:\s*([^:;]+)/g;function In(e,t,n){var o,i=e.getAttribute("style");if(i)for(An.lastIndex=0;null!=(o=An.exec(i));){var r=o[1],a=M(cn,r)?cn[r]:null;a&&(t[a]=o[2]);var s=M(hn,r)?hn[r]:null;s&&(n[s]=o[2])}}function Rn(e,t){var n=t.width/e.width,o=t.height/e.height,i=Math.min(n,o);return{scale:i,x:-(e.x+e.width/2)*i+(t.x+t.width/2),y:-(e.y+e.height/2)*i+(t.y+t.height/2)}}var On=B(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Dn=function(){function e(e,t){this.type="geoSVG",this._usedGraphicMap=B(),this._freedGraphics=[],this._mapName=e,this._parsedXML=un(t)}return e.prototype.load=function(){var e=this._firstGraphic;if(!e){e=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(e),this._boundingRect=this._firstGraphic.boundingRect.clone();var t=function(e){var t=[],o=B();return n(e,(function(e){if(null==e.namedFrom){var n=new Ut(e.name,e.el);t.push(n),o.set(e.name,n)}})),{regions:t,regionsMap:o}}(e.named),o=t.regions,i=t.regionsMap;this._regions=o,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},e.prototype._buildGraphic=function(e){var t,i,r,a;try{i=(t=e&&(r=e,a={ignoreViewBox:!0,ignoreRootClip:!0},(new fn).parse(r,a))||{}).root,H(null!=i)}catch(_){throw new Error("Invalid svg format\n"+_.message)}var s=new x;s.add(i),s.isGeoSVGGraphicRoot=!0;var l=t.width,u=t.height,c=t.viewBoxRect,p=this._boundingRect;if(!p){var h=void 0,d=void 0,f=void 0,g=void 0;if(null!=l?(h=0,f=l):c&&(h=c.x,f=c.width),null!=u?(d=0,g=u):c&&(d=c.y,g=c.height),null==h||null==d){var v=i.getBoundingRect();null==h&&(h=v.x,f=v.width),null==d&&(d=v.y,g=v.height)}p=this._boundingRect=new o(h,d,f,g)}if(c){var m=Rn(c,p);i.scaleX=i.scaleY=m.scale,i.x=m.x,i.y=m.y}s.setClipPath(new b({shape:p.plain()}));var y=[];return n(t.named,(function(e){var t;null!=On.get(e.svgNodeTagLower)&&(y.push(e),(t=e.el).silent=!1,t.isGroup&&t.traverse((function(e){e.silent=!1})))})),{root:s,boundingRect:p,named:y}},e.prototype.useGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),t.set(e,n),n)},e.prototype.freeGraphic=function(e){var t=this._usedGraphicMap,n=t.get(e);n&&(t.removeKey(e),this._freedGraphics.push(n))},e}();for(var Vn=[126,25],Ln="南海诸岛",zn=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],kn=0;kn<zn.length;kn++)for(var Pn=0;Pn<zn[kn].length;Pn++)zn[kn][Pn][0]/=10.5,zn[kn][Pn][1]/=-14,zn[kn][Pn][0]+=Vn[0],zn[kn][Pn][1]+=Vn[1];var Nn={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};var Fn=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];var Gn=function(){function e(e,t,n){var o;this.type="geoJSON",this._parsedMap=B(),this._mapName=e,this._specialAreas=n,this._geoJSON=y(o=t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(o):new Function("return ("+o+");")():o}return e.prototype.load=function(e,t){t=t||"name";var i=this._parsedMap.get(t);if(!i){var r=this._parseToRegions(t);i=this._parsedMap.set(t,{regions:r,boundingRect:En(r)})}var a=B(),s=[];return n(i.regions,(function(t){var n=t.name;e&&M(e,n)&&(t=t.cloneShallow(n=e[n])),s.push(t),a.set(n,t)})),{regions:s,boundingRect:i.boundingRect||new o(0,0,0,0),regionsMap:a}},e.prototype._parseToRegions=function(e){var t,o=this._mapName,i=this._geoJSON;try{t=i?Kt(i,e):[]}catch(r){throw new Error("Invalid geoJson format\n"+r.message)}return function(e,t){if("china"===e){for(var n=0;n<t.length;n++)if(t[n].name===Ln)return;t.push(new Wt(Ln,c(zn,(function(e){return{type:"polygon",exterior:e}})),Vn))}}(o,t),n(t,(function(e){var t=e.name;!function(e,t){if("china"===e){var n=Nn[t.name];if(n){var o=t.getCenter();o[0]+=n[0]/10.5,o[1]+=-n[1]/14,t.setCenter(o)}}}(o,e),function(e,t){"china"===e&&"台湾"===t.name&&t.geometries.push({type:"polygon",exterior:Fn[0]})}(o,e);var n=this._specialAreas&&this._specialAreas[t];n&&e.transformTo(n.left,n.top,n.width,n.height)}),this),t},e.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},e}();function En(e){for(var t,n=0;n<e.length;n++){var o=e[n].getBoundingRect();(t=t||o.clone()).union(o)}return t}var Bn=B();const Hn=function(e,t,n){if(t.svg){var o=new Dn(e,t.svg);Bn.set(e,o)}else{var i=t.geoJson||t.geoJSON;i&&!t.features?n=t.specialAreas:i=t;o=new Gn(e,i,n);Bn.set(e,o)}},Zn=function(e){return Bn.get(e)},Xn=function(e){var t=Bn.get(e);return t&&"geoJSON"===t.type&&t.getMapForUser()},Yn=function(e,t,n){var o=Bn.get(e);if(o)return o.load(t,n)};var Wn={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},Un=["lng","lat"],jn=function(e){function n(t,n,o){var i=e.call(this,t,{api:o.api,ecModel:o.ecModel})||this;i.dimensions=Un,i.type="geo",i._nameCoordMap=B(),i.map=n;var r=o.projection,a=Yn(n,o.nameMap,o.nameProperty),s=Zn(n);i.resourceType=s?s.type:null;var l,u=i.regions=a.regions,c=Wn[s.type];if(i._regionsMap=a.regionsMap,i.regions=a.regions,i.projection=r,r)for(var p=0;p<u.length;p++){var h=u[p].getBoundingRect(r);(l=l||h.clone()).union(h)}else l=a.boundingRect;return i.setBoundingRect(l.x,l.y,l.width,l.height),i.aspectScale=r?1:Z(o.aspectScale,c.aspectScale),i._invertLongitute=!r&&c.invertLongitute,i}return t(n,e),n.prototype._transformTo=function(e,t,n,i){var r=this.getBoundingRect(),a=this._invertLongitute;r=r.clone(),a&&(r.y=-r.y-r.height);var s=this._rawTransformable;s.transform=r.calculateTransform(new o(e,t,n,i));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,a&&(s.scaleY=-s.scaleY),this._updateTransform()},n.prototype.getRegion=function(e){return this._regionsMap.get(e)},n.prototype.getRegionByCoord=function(e){for(var t=this.regions,n=0;n<t.length;n++){var o=t[n];if("geoJSON"===o.type&&o.contain(e))return t[n]}},n.prototype.addGeoCoord=function(e,t){this._nameCoordMap.set(e,t)},n.prototype.getGeoCoord=function(e){var t=this._regionsMap.get(e);return this._nameCoordMap.get(e)||t&&t.getCenter()},n.prototype.dataToPoint=function(e,t,n){if(y(e)&&(e=this.getGeoCoord(e)),e){var o=this.projection;return o&&(e=o.project(e)),e&&this.projectedToPoint(e,t,n)}},n.prototype.pointToData=function(e,t,n){var o=this.projection;return o&&(e=o.unproject(e)),e&&this.pointToProjected(e,n)},n.prototype.pointToProjected=function(t,n){return e.prototype.pointToData.call(this,t,0,n)},n.prototype.projectedToPoint=function(t,n,o){return e.prototype.dataToPoint.call(this,t,n,o)},n.prototype.convertToPixel=function(e,t,n){var o=Jn(t);return o===this?o.dataToPoint(n):null},n.prototype.convertFromPixel=function(e,t,n){var o=Jn(t);return o===this?o.pointToData(n):null},n}(sn);function Jn(e){var t=e.geoModel,n=e.seriesModel;return t?t.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Y).models[0]||{}).coordinateSystem:null}X(jn,sn);const Kn=jn;function qn(e,t){var n=e.get("boundingCoords");if(null!=n){var o=n[0],i=n[1];if(isFinite(o[0])&&isFinite(o[1])&&isFinite(i[0])&&isFinite(i[1])){var r=this.projection;if(r){var a=o[0],s=o[1],c=i[0],p=i[1];o=[1/0,1/0],i=[-1/0,-1/0];var h=function(e,t,n,a){for(var s=n-e,c=a-t,p=0;p<=100;p++){var h=p/100,d=r.project([e+s*h,t+c*h]);l(o,o,d),u(i,i,d)}};h(a,s,c,s),h(c,s,c,p),h(c,p,a,p),h(a,p,c,s)}this.setBoundingRect(o[0],o[1],i[0]-o[0],i[1]-o[1])}else;}var f,g,v,m=this.getBoundingRect(),y=e.get("layoutCenter"),_=e.get("layoutSize"),x=q(e,t).refContainer,b=m.width/m.height*this.aspectScale,M=!1;if(y&&_&&(f=[d(y[0],x.width)+x.x,d(y[1],x.height)+x.y],g=d(_,Math.min(x.width,x.height)),isNaN(f[0])||isNaN(f[1])||isNaN(g)||(M=!0)),M)v={},b>1?(v.width=g,v.height=g/b):(v.height=g,v.width=g*b),v.y=f[1]-v.height/2,v.x=f[0]-v.width/2;else{var S=e.getBoxLayoutParams();S.aspect=b,v=$(S,x),v=Q(e,v,b)}this.setViewRect(v.x,v.y,v.width,v.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}var $n=function(){function e(){this.dimensions=Un}return e.prototype.create=function(e,t){var o=[];function i(e){return{nameProperty:e.get("nameProperty"),aspectScale:e.get("aspectScale"),projection:e.get("projection")}}e.eachComponent("geo",(function(n,r){var a=n.get("map"),s=new Kn(a+r,a,W({nameMap:n.get("nameMap"),api:t,ecModel:e},i(n)));s.zoomLimit=n.get("scaleLimit"),o.push(s),n.coordinateSystem=s,s.model=n,s.resize=qn,s.resize(n,t)})),e.eachSeries((function(e){U({targetModel:e,coordSysType:"geo",coordSysProvider:function(){var t="map"===e.subType?e.getHostGeoModel():e.getReferringComponents("geo",Y).models[0];return t&&t.coordinateSystem},allowNotFound:!0})}));var r={};return e.eachSeriesByType("map",(function(e){if(!e.getHostGeoModel()){var t=e.getMapType();r[t]=r[t]||[],r[t].push(e)}})),n(r,(function(r,a){var s=c(r,(function(e){return e.get("nameMap")})),l=new Kn(a,a,W({nameMap:j(s),api:t,ecModel:e},i(r[0])));l.zoomLimit=J.apply(null,c(r,(function(e){return e.get("scaleLimit")}))),o.push(l),l.resize=qn,l.resize(r[0],t),n(r,(function(e){e.coordinateSystem=l,function(e,t){n(t.get("geoCoord"),(function(t,n){e.addGeoCoord(n,t)}))}(l,e)}))})),o},e.prototype.getFilledRegions=function(e,t,o,i){for(var r=(e||[]).slice(),a=B(),s=0;s<r.length;s++)a.set(r[s].name,r[s]);var l=Yn(t,o,i);return n(l.regions,(function(e){var t=e.name,n=a.get(t),o=e.properties&&e.properties.echartsStyle;n||(n={name:t},r.push(n)),o&&K(n,o)})),r},e}(),Qn=new $n,eo=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n);var o=Zn(e.map);if(o&&"geoJSON"===o.type){var i=e.itemStyle=e.itemStyle||{};"color"in i||(i.color=e.defaultItemStyleColor||ee.color.backgroundTint)}te(e,"label",["show"])},n.prototype.optionUpdated=function(){var e=this,t=this.option;t.regions=Qn.getFilledRegions(t.regions,t.map,t.nameMap,t.nameProperty);var n={};this._optionModelMap=ne(t.regions||[],(function(t,o){var i=o.name;return i&&(t.set(i,new oe(o,e,e.ecModel)),o.selected&&(n[i]=!0)),t}),B()),t.selectedMap||(t.selectedMap=n)},n.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new oe(null,this,this.ecModel)},n.prototype.getFormattedLabel=function(e,t){var n=this.getRegionModel(e),o="normal"===t?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),i={name:e};return ie(o)?(i.status=t,o(i)):y(o)?o.replace("{a}",null!=e?e:""):void 0},n.prototype.setZoom=function(e){this.option.zoom=e},n.prototype.setCenter=function(e){this.option.center=e},n.prototype.select=function(e){var t=this.option,n=t.selectedMode;n&&("multiple"!==n&&(t.selectedMap=null),(t.selectedMap||(t.selectedMap={}))[e]=!0)},n.prototype.unSelect=function(e){var t=this.option.selectedMap;t&&(t[e]=!1)},n.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},n.prototype.isSelected=function(e){var t=this.option.selectedMap;return!(!t||!t[e])},n.type="geo",n.layoutMode="box",n.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:ee.color.tertiary},itemStyle:{borderWidth:.5,borderColor:ee.color.border},emphasis:{label:{show:!0,color:ee.color.primary},itemStyle:{color:ee.color.highlight}},select:{label:{show:!0,color:ee.color.primary},itemStyle:{color:ee.color.highlight}},regions:[]},n}(re),to=ae();function no(e,t){return!!to(e)[t]}se({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},le);var oo={axisPointer:1,tooltip:1,brush:1};function io(e,t,n){var o=t.getComponentByElement(e.topTarget);if(!o||o===n||oo.hasOwnProperty(o.mainType))return!1;var i=o.coordinateSystem;if(!i||i.model===n)return!1;var r=ue(o),a=ue(n);return!((r.zlevel-a.zlevel||r.z-a.z)<=0)}var ro=function(e){function n(t){var n=e.call(this)||this;n._zr=t;var o=ce(n._mousedownHandler,n),i=ce(n._mousemoveHandler,n),r=ce(n._mouseupHandler,n),a=ce(n._mousewheelHandler,n),s=ce(n._pinchHandler,n);return n.enable=function(e,n){var l=n.zInfo,u=ue(l.component),c=u.z,p=u.zlevel,h={component:l.component,z:c,zlevel:p,z2:Z(l.z2,-1/0)},d=W({},n.triggerInfo);this._opt=P(W({},n),{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0,zInfoParsed:h,triggerInfo:d}),null==e&&(e=!0),this._enabled&&this._controlType===e||(this._enabled=!0,this.disable(),!0!==e&&"move"!==e&&"pan"!==e||(uo(t,"mousedown",o,h),uo(t,"mousemove",i,h),uo(t,"mouseup",r,h)),!0!==e&&"scale"!==e&&"zoom"!==e||(uo(t,"mousewheel",a,h),uo(t,"pinch",s,h)))},n.disable=function(){this._enabled=!1,co(t,"mousedown",o),co(t,"mousemove",i),co(t,"mouseup",r),co(t,"mousewheel",a),co(t,"pinch",s)},n}return t(n,e),n.prototype.isDragging=function(){return this._dragging},n.prototype.isPinching=function(){return this._pinching},n.prototype._checkPointer=function(e,t,n){var o=this._opt,i=o.zInfoParsed;if(io(e,o.api,i.component))return!1;var r=o.triggerInfo,a=!1;return"global"===r.roamTrigger&&(a=!0),a||(a=r.isInSelf(e,t,n)),a&&r.isInClip&&!r.isInClip(e,t,n)&&(a=!1),a},n.prototype._decideCursorStyle=function(e,t,n,o){var i=e.target;return!i&&this._checkPointer(e,t,n)?"grab":o?i&&i.cursor||"default":void 0},n.prototype.dispose=function(){this.disable()},n.prototype._mousedownHandler=function(e){if(!pe(e)&&!ao(e)){for(var t=e.target;t;){if(t.draggable)return;t=t.__hostTarget||t.parent}var n=e.offsetX,o=e.offsetY;this._checkPointer(e,n,o)&&(this._x=n,this._y=o,this._dragging=!0)}},n.prototype._mousemoveHandler=function(e){var t=this._zr;if("pinch"!==e.gestureEvent&&!no(t,"globalPan")&&!ao(e)){var n=e.offsetX,o=e.offsetY;if(this._dragging&&fo("moveOnMouseMove",e,this._opt)){t.setCursorStyle("grabbing");var i=this._x,r=this._y,a=n-i,s=o-r;this._x=n,this._y=o,this._opt.preventDefaultMouseMove&&he(e.event),e.__ecRoamConsumed=!0,ho(this,"pan","moveOnMouseMove",e,{dx:a,dy:s,oldX:i,oldY:r,newX:n,newY:o,isAvailableBehavior:null})}else{var l=this._decideCursorStyle(e,n,o,!1);l&&t.setCursorStyle(l)}}},n.prototype._mouseupHandler=function(e){if(!ao(e)){var t=this._zr;if(!pe(e)){this._dragging=!1;var n=this._decideCursorStyle(e,e.offsetX,e.offsetY,!0);n&&t.setCursorStyle(n)}}},n.prototype._mousewheelHandler=function(e){if(!ao(e)){var t=fo("zoomOnMouseWheel",e,this._opt),n=fo("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,i=Math.abs(o),r=e.offsetX,a=e.offsetY;if(0!==o&&(t||n)){if(t){var s=i>3?1.4:i>1?1.2:1.1,l=o>0?s:1/s;this._checkTriggerMoveZoom(this,"zoom","zoomOnMouseWheel",e,{scale:l,originX:r,originY:a,isAvailableBehavior:null})}if(n){var u=Math.abs(o),c=(o>0?1:-1)*(u>3?.4:u>1?.15:.05);this._checkTriggerMoveZoom(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:c,originX:r,originY:a,isAvailableBehavior:null})}}}},n.prototype._pinchHandler=function(e){if(!no(this._zr,"globalPan")&&!ao(e)){var t=e.pinchScale>1?1.1:1/1.1;this._checkTriggerMoveZoom(this,"zoom",null,e,{scale:t,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})}},n.prototype._checkTriggerMoveZoom=function(e,t,n,o,i){e._checkPointer(o,i.originX,i.originY)&&(he(o.event),o.__ecRoamConsumed=!0,ho(e,t,n,o,i))},n}(de);function ao(e){return e.__ecRoamConsumed}var so=ae();function lo(e){var t=so(e);return t.roam=t.roam||{},t.uniform=t.uniform||{},t}function uo(e,t,n,o){for(var i=lo(e).roam,r=i[t]=i[t]||[],a=0;a<r.length;a++){var s=r[a].zInfoParsed;if((s.zlevel-o.zlevel||s.z-o.z||s.z2-o.z2)<=0)break}r.splice(a,0,{listener:n,zInfoParsed:o}),function(e,t){var n=lo(e);n.uniform[t]||e.on(t,n.uniform[t]=function(e){var o=n.roam[t];if(o)for(var i=0;i<o.length;i++)o[i].listener(e)})}(e,t)}function co(e,t,n){for(var o=lo(e).roam[t]||[],i=0;i<o.length;i++)if(o[i].listener===n)return o.splice(i,1),void(o.length||po(e,t))}function po(e,t){var n=lo(e).uniform;n[t]&&(e.off(t,n[t]),n[t]=null)}function ho(e,t,n,o,i){i.isAvailableBehavior=ce(fo,null,n,o),e.trigger(t,i)}function fo(e,t,n){var o=n[e];return!e||o&&(!y(o)||t.event[o+"Key"])}var go=["rect","circle","line","ellipse","polygon","polyline","path"],vo=B(go),mo=B(go.concat(["g"])),yo=B(go.concat(["g"])),_o=ae();function xo(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function bo(e){var t=e.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var Mo=function(){function e(e){var t=this.group=new x,n=this._transformGroup=new x;t.add(n),this.uid=fe("ec_map_draw"),this._controller=new ro(e.getZr()),this._controllerHost={target:n},n.add(this._regionsGroup=new x),n.add(this._svgGroup=new x)}return e.prototype.draw=function(e,t,n,o,i){var r="geo"===e.mainType,a=e.getData&&e.getData();r&&t.eachComponent({mainType:"series",subType:"map"},(function(t){a||t.getHostGeoModel()!==e||(a=t.getData())}));var s,l=e.coordinateSystem,u=this._regionsGroup,c=this._transformGroup,p=l.getTransformInfo(),h=p.raw,d=p.roam,f=!u.childAt(0)||i;e.getShallow("clip",!0)?(s=l.getViewRect().clone(),this.group.setClipPath(new b({shape:s.clone()}))):this.group.removeClipPath(),f?(c.x=d.x,c.y=d.y,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.dirty()):ge(c,d,e);var g=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,v={api:n,geo:l,mapOrGeoModel:e,data:a,isVisualEncodedByVisualMap:g,isGeo:r,transformInfoRaw:h};"geoJSON"===l.resourceType?this._buildGeoJSON(v):"geoSVG"===l.resourceType&&this._buildSVG(v),this._updateController(e,s,t,n),this._updateMapSelectHandler(e,u,n,o)},e.prototype._buildGeoJSON=function(e){var t=this._regionsGroupByName=B(),o=B(),i=this._regionsGroup,r=e.transformInfoRaw,a=e.mapOrGeoModel,s=e.data,l=e.geo.projection,u=l&&l.stream;function c(e,t){return t&&(e=t(e)),e&&[e[0]*r.scaleX+r.x,e[1]*r.scaleY+r.y]}function p(e){for(var t=[],n=!u&&l&&l.project,o=0;o<e.length;++o){var i=c(e[o],n);i&&t.push(i)}return t}function h(e){return{shape:{points:p(e)}}}i.removeAll(),n(e.geo.regions,(function(r){var p=r.name,d=t.get(p),f=o.get(p)||{},g=f.dataIdx,v=f.regionModel;if(!d){d=t.set(p,new x),i.add(d),g=s?s.indexOfName(p):null;var m=(v=e.isGeo?a.getRegionModel(p):s?s.getItemModel(g):null).get("silent",!0);null!=m&&(d.silent=m),o.set(p,{dataIdx:g,regionModel:v})}var y=[],_=[];n(r.geometries,(function(e){if("polygon"===e.type){var t=[e.exterior].concat(e.interiors||[]);u&&(t=Io(t,u)),n(t,(function(e){y.push(new A(h(e)))}))}else{var o=e.points;u&&(o=Io(o,u,!0)),n(o,(function(e){_.push(new I(h(e)))}))}}));var b=c(r.getCenter(),l&&l.project);function M(t,o){if(t.length){var i=new Te({culling:!0,segmentIgnoreThreshold:1,shape:{paths:t}});d.add(i),So(e,i,g,v),wo(e,i,p,v,a,g,b),o&&(bo(i),n(i.states,bo))}}M(y),M(_,!0)})),t.each((function(t,n){var i=o.get(n),r=i.dataIdx,s=i.regionModel;To(e,t,n,s,a,r),Co(e,t,n,s,a),Ao(e,t,n,s,a)}),this)},e.prototype._buildSVG=function(e){var t=e.geo.map,o=e.transformInfoRaw;this._svgGroup.x=o.x,this._svgGroup.y=o.y,this._svgGroup.scaleX=o.scaleX,this._svgGroup.scaleY=o.scaleY,this._svgResourceChanged(t)&&(this._freeSVG(),this._useSVG(t));var i=this._svgDispatcherMap=B(),r=!1;n(this._svgGraphicRecord.named,(function(t){var n=t.name,o=e.mapOrGeoModel,a=e.data,s=t.svgNodeTagLower,l=t.el,u=a?a.indexOfName(n):null,c=o.getRegionModel(n);null!=vo.get(s)&&l instanceof ve&&So(e,l,u,c),l instanceof ve&&(l.culling=!0);var p=c.get("silent",!0);(null!=p&&(l.silent=p),l.z2EmphasisLift=0,t.namedFrom)||(null!=yo.get(s)&&wo(e,l,n,c,o,u,null),To(e,l,n,c,o,u),Co(e,l,n,c,o),null!=mo.get(s)&&("self"===Ao(e,l,n,c,o)&&(r=!0),(i.get(n)||i.set(n,[])).push(l)))}),this),this._enableBlurEntireSVG(r,e)},e.prototype._enableBlurEntireSVG=function(e,t){if(e&&t.isGeo){var n=t.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(e){if(!e.isGroup){me(e);var t=e.ensureState("blur").style||{};null==t.opacity&&null!=n&&(t.opacity=n),e.ensureState("emphasis")}}))}},e.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},e.prototype.findHighDownDispatchers=function(e,t){if(null==e)return[];var n=t.coordinateSystem;if("geoJSON"===n.resourceType){var o=this._regionsGroupByName;if(o){var i=o.get(e);return i?[i]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(e)||[]},e.prototype._svgResourceChanged=function(e){return this._svgMapName!==e},e.prototype._useSVG=function(e){var t=Zn(e);if(t&&"geoSVG"===t.type){var n=t.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=e}},e.prototype._freeSVG=function(){var e=this._svgMapName;if(null!=e){var t=Zn(e);t&&"geoSVG"===t.type&&t.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},e.prototype._updateController=function(e,t,n,o){var i=e.coordinateSystem,r=this._controller,a=this._controllerHost;a.zoomLimit=e.get("scaleLimit"),a.zoom=i.getZoom(),r.enable(e.get("roam")||!1,{api:o,zInfo:{component:e},triggerInfo:{roamTrigger:e.get("roamTrigger"),isInSelf:function(e,t,n){return i.containPoint([t,n])},isInClip:function(e,n,o){return!t||t.contain(n,o)}}});var s=e.mainType;function l(){var t={type:"geoRoam",componentType:s};return t[s+"Id"]=e.id,t}r.off("pan").on("pan",(function(e){this._mouseDownFlag=!1,qt(a,e.dx,e.dy),o.dispatchAction(W(l(),{dx:e.dx,dy:e.dy,animation:{duration:0}}))}),this),r.off("zoom").on("zoom",(function(e){this._mouseDownFlag=!1,$t(a,e.scale,e.originX,e.originY),o.dispatchAction(W(l(),{totalZoom:a.zoom,zoom:e.scale,originX:e.originX,originY:e.originY,animation:{duration:0}}))}),this)},e.prototype.resetForLabelLayout=function(){this.group.traverse((function(e){var t=e.getTextContent();t&&(t.ignore=_o(t).ignore)}))},e.prototype._updateMapSelectHandler=function(e,t,n,o){var i=this;t.off("mousedown"),t.off("click"),e.get("selectedMode")&&(t.on("mousedown",(function(){i._mouseDownFlag=!0})),t.on("click",(function(e){i._mouseDownFlag&&(i._mouseDownFlag=!1)})))},e}();function So(e,t,n,o){var i=o.getModel("itemStyle"),r=o.getModel(["emphasis","itemStyle"]),a=o.getModel(["blur","itemStyle"]),s=o.getModel(["select","itemStyle"]),l=xo(i),u=xo(r),c=xo(s),p=xo(a),h=e.data;if(h){var d=h.getItemVisual(n,"style"),f=h.getItemVisual(n,"decal");e.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),f&&(l.decal=ye(f,e.api))}t.setStyle(l),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=u,t.ensureState("select").style=c,t.ensureState("blur").style=p,me(t)}function wo(e,t,n,o,i,r,a){var s=e.data,l=e.isGeo,u=s&&isNaN(s.get(s.mapDimension("value"),r)),c=s&&s.getItemLayout(r);if(l||u||c&&c.showLabel){var p=l?n:r,h=void 0;(!s||r>=0)&&(h=i);var d=a?{normal:{align:"center",verticalAlign:"middle"}}:null;_e(t,xe(o),{labelFetcher:h,labelDataIndex:p,defaultText:n},d);var f=t.getTextContent();if(f&&(_o(f).ignore=f.ignore,t.textConfig&&a)){var g=t.getBoundingRect().clone();t.textConfig.layoutRect=g,t.textConfig.position=[(a[0]-g.x)/g.width*100+"%",(a[1]-g.y)/g.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function To(e,t,n,o,i,r){e.data?e.data.setItemGraphicEl(r,t):be(t).eventData={componentType:"geo",componentIndex:i.componentIndex,geoIndex:i.componentIndex,name:n,region:o&&o.option||{}}}function Co(e,t,n,o,i){e.data||Me({el:t,componentModel:i,itemName:n,itemTooltipOption:o.get("tooltip")})}function Ao(e,t,n,o,i){t.highDownSilentOnTouch=!!i.get("selectedMode");var r=o.getModel("emphasis"),a=r.get("focus");return Se(t,a,r.get("blurScope"),r.get("disabled")),e.isGeo&&we(t,i,n),a}function Io(e,t,o){var i,r=[];function a(){i=[]}function s(){i.length&&(r.push(i),i=[])}var l=t({polygonStart:a,polygonEnd:s,lineStart:a,lineEnd:s,point:function(e,t){isFinite(e)&&isFinite(t)&&i.push([e,t])},sphere:function(){}});return!o&&l.polygonStart(),n(e,(function(e){l.lineStart();for(var t=0;t<e.length;t++)l.point(e[t][0],e[t][1]);l.lineEnd()})),!o&&l.polygonEnd(),r}var Ro=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.focusBlurEnabled=!0,t}return t(n,e),n.prototype.init=function(e,t){this._api=t},n.prototype.render=function(e,t,n,o){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new Mo(n));var i=this._mapDraw;i.draw(e,t,n,this,o),i.group.on("click",this._handleRegionClick,this),i.group.silent=e.get("silent"),this.group.add(i.group),this.updateSelectStatus(e,t,n)},n.prototype._handleRegionClick=function(e){var t;Ce(e.target,(function(e){return null!=(t=be(e).eventData)}),!0),t&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:t.name})},n.prototype.updateSelectStatus=function(e,t,n){var o=this;this._mapDraw.group.traverse((function(e){var t=be(e).eventData;if(t)return o._model.isSelected(t.name)?n.enterSelect(e):n.leaveSelect(e),!0}))},n.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},n.type="geo",n}(Ae);function Oo(e,t,n){Hn(e,t,n)}function Do(e){function t(t,o){o.update="geo:updateSelectStatus",e.registerAction(o,(function(e,o){var i={},r=[];return o.eachComponent({mainType:"geo",query:e},(function(o){o[t](e.name);var a=o.coordinateSystem;n(a.regions,(function(e){i[e.name]=o.isSelected(e.name)||!1}));var s=[];n(i,(function(e,t){i[t]&&s.push(t)})),r.push({geoIndex:o.componentIndex,name:s})})),{selected:i,allSelected:r,name:e.name}}))}e.registerCoordinateSystem("geo",Qn),e.registerComponentModel(eo),e.registerComponentView(Ro),e.registerImpl("registerMap",Oo),e.registerImpl("getMap",(function(e){return Xn(e)})),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),e.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(e,t,o){var i=e.componentType;i||(null!=e.geoId?i="geo":null!=e.seriesId&&(i="series")),i||(i="series"),t.eachComponent({mainType:i,query:e},(function(t){var o=t.coordinateSystem;if("geo"===o.type){var r=tn(o,e,t.get("scaleLimit"));t.setCenter&&t.setCenter(r.center),t.setZoom&&t.setZoom(r.zoom),"series"===i&&n(t.seriesGroup,(function(e){e.setCenter(r.center),e.setZoom(r.zoom)}))}}))}))}function Vo(e,t,n,o,i,r){e=e||0;var a=n[1]-n[0];if(null!=i&&(i=zo(i,[0,a])),null!=r&&(r=Math.max(r,null!=i?i:0)),"all"===o){var s=Math.abs(t[1]-t[0]);s=zo(s,[0,a]),i=r=zo(s,[i,r]),o=0}t[0]=zo(t[0],n),t[1]=zo(t[1],n);var l=Lo(t,o);t[o]+=e;var u,c=i||0,p=n.slice();return l.sign<0?p[0]+=c:p[1]-=c,t[o]=zo(t[o],p),u=Lo(t,o),null!=i&&(u.sign!==l.sign||u.span<i)&&(t[1-o]=t[o]+l.sign*i),u=Lo(t,o),null!=r&&u.span>r&&(t[1-o]=t[o]+u.sign*r),t}function Lo(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:n>0?-1:n<0?1:t?-1:1}}function zo(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}var ko=!0,Po=Math.min,No=Math.max,Fo=Math.pow,Go="globalPan",Eo={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Bo={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Ho={brushStyle:{lineWidth:2,stroke:ee.color.backgroundTint,fill:ee.color.borderTint},transformable:!0,brushMode:"single",removeOnClick:!1},Zo=0,Xo=function(e){function o(t){var o=e.call(this)||this;return o._track=[],o._covers=[],o._handlers={},o._zr=t,o.group=new x,o._uid="brushController_"+Zo++,n(mi,(function(e,t){this._handlers[t]=ce(e,this)}),o),o}return t(o,e),o.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},o.prototype._doEnableBrush=function(e){var t=this._zr;this._enableGlobalPan||function(e,t,n){to(e)[t]=n}(t,Go,this._uid),n(this._handlers,(function(e,n){t.on(n,e)})),this._brushType=e.brushType,this._brushOption=K(f(Ho),e,!0)},o.prototype._doDisableBrush=function(){var e=this._zr;!function(e,t,n){var o=to(e);o[t]===n&&(o[t]=null)}(e,Go,this._uid),n(this._handlers,(function(t,n){e.off(n,t)})),this._brushType=this._brushOption=null},o.prototype.setPanels=function(e){if(e&&e.length){var t=this._panels={};n(e,(function(e){t[e.panelId]=f(e)}))}else this._panels=null;return this},o.prototype.mount=function(e){e=e||{},this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=t.getLocalTransform(),this},o.prototype.updateCovers=function(e){e=c(e,(function(e){return K(f(Ho),e,!0)}));var t=this._covers,n=this._covers=[],o=this,i=this._creatingCover;return new Ie(t,e,(function(e,t){return r(e.__brushOption,t)}),r).add(a).update(a).remove((function(e){t[e]!==i&&o.group.remove(t[e])})).execute(),this;function r(e,t){return(null!=e.id?e.id:"\0-brush-index-"+t)+"-"+e.brushType}function a(r,a){var s=e[r];if(null!=a&&t[a]===i)n[r]=t[a];else{var l=n[r]=null!=a?(t[a].__brushOption=s,t[a]):Wo(o,Yo(o,s));Jo(o,l)}}},o.prototype.unmount=function(){return this.enableBrush(!1),Qo(this),this._zr.remove(this.group),this},o.prototype.dispose=function(){this.unmount(),this.off()},o}(de);function Yo(e,t){var n=_i[t.brushType].createCover(e,t);return n.__brushOption=t,jo(n,t),e.group.add(n),n}function Wo(e,t){var n=Ko(t);return n.endCreating&&(n.endCreating(e,t),jo(t,t.__brushOption)),t}function Uo(e,t){var n=t.__brushOption;Ko(t).updateCoverShape(e,t,n.range,n)}function jo(e,t){var n=t.z;null==n&&(n=1e4),e.traverse((function(e){e.z=n,e.z2=n}))}function Jo(e,t){Ko(t).updateCommon(e,t),Uo(e,t)}function Ko(e){return _i[e.__brushOption.brushType]}function qo(e,t,o){var i,r=e._panels;if(!r)return ko;var a=e._transform;return n(r,(function(e){e.isTargetByCursor(t,o,a)&&(i=e)})),i}function $o(e,t){var n=e._panels;if(!n)return ko;var o=t.__brushOption.panelId;return null!=o?n[o]:ko}function Qo(e){var t=e._covers,o=t.length;return n(t,(function(t){e.group.remove(t)}),e),t.length=0,!!o}function ei(e,t){var n=c(e._covers,(function(e){var t=e.__brushOption,n=f(t.range);return{brushType:t.brushType,panelId:t.panelId,range:n}}));e.trigger("brush",{areas:n,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function ti(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function ni(e,t,o,i){var r=new x;return r.add(new b({name:"main",style:ai(o),silent:!0,draggable:!0,cursor:"move",drift:Re(ui,e,t,r,["n","s","w","e"]),ondragend:Re(ei,t,{isEnd:!0})})),n(i,(function(n){r.add(new b({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Re(ui,e,t,r,n),ondragend:Re(ei,t,{isEnd:!0})}))})),r}function oi(e,t,n,o){var i=o.brushStyle.lineWidth||0,r=No(i,6),a=n[0][0],s=n[1][0],l=a-i/2,u=s-i/2,c=n[0][1],p=n[1][1],h=c-r+i/2,d=p-r+i/2,f=c-a,g=p-s,v=f+i,m=g+i;ri(e,t,"main",a,s,f,g),o.transformable&&(ri(e,t,"w",l,u,r,m),ri(e,t,"e",h,u,r,m),ri(e,t,"n",l,u,v,r),ri(e,t,"s",l,d,v,r),ri(e,t,"nw",l,u,r,r),ri(e,t,"ne",h,u,r,r),ri(e,t,"sw",l,d,r,r),ri(e,t,"se",h,d,r,r))}function ii(e,t){var o=t.__brushOption,i=o.transformable,r=t.childAt(0);r.useStyle(ai(o)),r.attr({silent:!i,cursor:i?"move":"default"}),n([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var o=t.childOfName(n.join("")),r=1===n.length?li(e,n[0]):function(e,t){var n=[li(e,t[0]),li(e,t[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(e,n);o&&o.attr({silent:!i,invisible:!i,cursor:i?Bo[r]+"-resize":null})}))}function ri(e,t,n,o,i,r,a){var s,l,u,c,p,h=t.childOfName(n);h&&h.setShape((s=hi(e,t,[[o,i],[o+r,i+a]]),l=Po(s[0][0],s[1][0]),u=Po(s[0][1],s[1][1]),c=No(s[0][0],s[1][0]),p=No(s[0][1],s[1][1]),{x:l,y:u,width:c-l,height:p-u}))}function ai(e){return P({strokeNoScale:!0},e.brushStyle)}function si(e,t,n,o){var i=[Po(e,n),Po(t,o)],r=[No(e,n),No(t,o)];return[[i[0],r[0]],[i[1],r[1]]]}function li(e,t){var n=Oe({w:"left",e:"right",n:"top",s:"bottom"}[t],function(e){return De(e.group)}(e));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function ui(e,t,o,i,r,a){var s=o.__brushOption,l=e.toRectRange(s.range),u=pi(t,r,a);n(i,(function(e){var t=Eo[e];l[t[0]][t[1]]+=u[t[0]]})),s.range=e.fromRectRange(si(l[0][0],l[1][0],l[0][1],l[1][1])),Jo(t,o),ei(t,{isEnd:!1})}function ci(e,t,o,i){var r=t.__brushOption.range,a=pi(e,o,i);n(r,(function(e){e[0]+=a[0],e[1]+=a[1]})),Jo(e,t),ei(e,{isEnd:!1})}function pi(e,t,n){var o=e.group,i=o.transformCoordToLocal(t,n),r=o.transformCoordToLocal(0,0);return[i[0]-r[0],i[1]-r[1]]}function hi(e,t,n){var o=$o(e,t);return o&&o!==ko?o.clipPath(n,e._transform):f(n)}function di(e){var t=e.event;t.preventDefault&&t.preventDefault()}function fi(e,t,n){return e.childOfName("main").contain(t,n)}function gi(e,t,n,o){var i,r=e._creatingCover,a=e._creatingPanel,s=e._brushOption;if(e._track.push(n.slice()),function(e){var t=e._track;if(!t.length)return!1;var n=t[t.length-1],o=t[0],i=n[0]-o[0],r=n[1]-o[1];return Fo(i*i+r*r,.5)>6}(e)||r){if(a&&!r){"single"===s.brushMode&&Qo(e);var l=f(s);l.brushType=vi(l.brushType,a),l.panelId=a===ko?null:a.panelId,r=e._creatingCover=Yo(e,l),e._covers.push(r)}if(r){var u=_i[vi(e._brushType,a)];r.__brushOption.range=u.getCreatingRange(hi(e,r,e._track)),o&&(Wo(e,r),u.updateCommon(e,r)),Uo(e,r),i={isEnd:o}}}else o&&"single"===s.brushMode&&s.removeOnClick&&qo(e,t,n)&&Qo(e)&&(i={isEnd:o,removeOnClick:!0});return i}function vi(e,t){return"auto"===e?t.defaultBrushType:e}var mi={mousedown:function(e){if(this._dragging)yi(this,e);else if(!e.target||!e.target.draggable){di(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=qo(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=e.offsetX,n=e.offsetY,o=this.group.transformCoordToLocal(t,n);if(function(e,t,n){if(e._brushType&&!function(e,t,n){var o=e._zr;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}(e,t.offsetX,t.offsetY)){var o=e._zr,i=e._covers,r=qo(e,t,n);if(!e._dragging)for(var a=0;a<i.length;a++){var s=i[a].__brushOption;if(r&&(r===ko||s.panelId===r.panelId)&&_i[s.brushType].contain(i[a],n[0],n[1]))return}r&&o.setCursorStyle("crosshair")}}(this,e,o),this._dragging){di(e);var i=gi(this,e,o,!1);i&&ei(this,i)}},mouseup:function(e){yi(this,e)}};function yi(e,t){if(e._dragging){di(t);var n=t.offsetX,o=t.offsetY,i=e.group.transformCoordToLocal(n,o),r=gi(e,t,i,!0);e._dragging=!1,e._track=[],e._creatingCover=null,r&&ei(e,r)}}var _i={lineX:xi(0),lineY:xi(1),rect:{createCover:function(e,t){function n(e){return e}return ni({toRectRange:n,fromRectRange:n},e,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(e){var t=ti(e);return si(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){oi(e,t,n,o)},updateCommon:ii,contain:fi},polygon:{createCover:function(e,t){var n=new x;return n.add(new I({name:"main",style:ai(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new A({name:"main",draggable:!0,drift:Re(ci,e,t),ondragend:Re(ei,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:hi(e,t,n)})},updateCommon:ii,contain:fi}};function xi(e){return{createCover:function(t,n){return ni({toRectRange:function(t){var n=[t,[0,100]];return e&&n.reverse(),n},fromRectRange:function(t){return t[e]}},t,n,[[["w"],["e"]],[["n"],["s"]]][e])},getCreatingRange:function(t){var n=ti(t);return[Po(n[0][e],n[1][e]),No(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,i){var r,a=$o(t,n);if(a!==ko&&a.getLinearBrushOtherExtent)r=a.getLinearBrushOtherExtent(e);else{var s=t._zr;r=[0,[s.getWidth(),s.getHeight()][1-e]]}var l=[o,r];e&&l.reverse(),oi(t,n,l,i)},updateCommon:ii,contain:fi}}function bi(e){return e=wi(e),function(t){return Ve(t,e)}}function Mi(e,t){return e=wi(e),function(n){var o=null!=t?t:n,i=o?e.width:e.height,r=o?e.x:e.y;return[r,r+(i||0)]}}function Si(e,t,n){var o=wi(e);return function(e,i){return o.contain(i[0],i[1])&&!io(e,t,n)}}function wi(e){return o.create(e)}var Ti=["x","y","radius","angle","single"],Ci=["cartesian2d","polar","singleAxis"];function Ai(e){return e+"Axis"}function Ii(e,t){var n,o=B(),i=[],r=B();e.eachComponent({mainType:"dataZoom",query:t},(function(e){r.get(e.uid)||s(e)}));do{n=!1,e.eachComponent("dataZoom",a)}while(n);function a(e){!r.get(e.uid)&&function(e){var t=!1;return e.eachTargetAxis((function(e,n){var i=o.get(e);i&&i[n]&&(t=!0)})),t}(e)&&(s(e),n=!0)}function s(e){r.set(e.uid,!0),i.push(e),e.eachTargetAxis((function(e,t){(o.get(e)||o.set(e,[]))[t]=!0}))}return i}function Ri(e){var t=e.ecModel,n={infoList:[],infoMap:B()};return e.eachTargetAxis((function(e,o){var i=t.getComponent(Ai(e),o);if(i){var r=i.getCoordSysModel();if(r){var a=r.uid,s=n.infoMap.get(a);s||(s={model:r,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(i)}}})),n}var Oi=function(){function e(){this.indexList=[],this.indexMap=[]}return e.prototype.add=function(e){this.indexMap[e]||(this.indexList.push(e),this.indexMap[e]=!0)},e}(),Di=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t._autoThrottle=!0,t._noTarget=!0,t._rangePropMode=["percent","percent"],t}return t(o,e),o.prototype.init=function(e,t,n){var o=Vi(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this._doInit(o)},o.prototype.mergeOption=function(e){var t=Vi(e);K(this.option,e,!0),K(this.settledOption,t,!0),this._doInit(t)},o.prototype._doInit=function(e){var t=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;n([["start","startValue"],["end","endValue"]],(function(e,n){"value"===this._rangePropMode[n]&&(t[e[0]]=o[e[0]]=null)}),this),this._resetTarget()},o.prototype._resetTarget=function(){var e=this.get("orient",!0),t=this._targetAxisInfoMap=B();this._fillSpecifiedTargetAxis(t)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(t,this._orient)),this._noTarget=!0,t.each((function(e){e.indexList.length&&(this._noTarget=!1)}),this)},o.prototype._fillSpecifiedTargetAxis=function(e){var t=!1;return n(Ti,(function(o){var i=this.getReferringComponents(Ai(o),ze);if(i.specified){t=!0;var r=new Oi;n(i.models,(function(e){r.add(e.componentIndex)})),e.set(o,r)}}),this),t},o.prototype._fillAutoTargetAxisByOrient=function(e,t){var o=this.ecModel,i=!0;if(i){var r="vertical"===t?"y":"x";a(o.findComponents({mainType:r+"Axis"}),r)}i&&a(o.findComponents({mainType:"singleAxis",filter:function(e){return e.get("orient",!0)===t}}),"single");function a(t,o){var r=t[0];if(r){var a=new Oi;if(a.add(r.componentIndex),e.set(o,a),i=!1,"x"===o||"y"===o){var s=r.getReferringComponents("grid",Y).models[0];s&&n(t,(function(e){r.componentIndex!==e.componentIndex&&s===e.getReferringComponents("grid",Y).models[0]&&a.add(e.componentIndex)}))}}}i&&n(Ti,(function(t){if(i){var n=o.findComponents({mainType:Ai(t),filter:function(e){return"category"===e.get("type",!0)}});if(n[0]){var r=new Oi;r.add(n[0].componentIndex),e.set(t,r),i=!1}}}),this)},o.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis((function(t){!e&&(e=t)}),this),"y"===e?"vertical":"horizontal"},o.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&t.animationDurationUpdate>0?100:20}},o.prototype._updateRangeUse=function(e){var t=this._rangePropMode,o=this.get("rangeMode");n([["start","startValue"],["end","endValue"]],(function(n,i){var r=null!=e[n[0]],a=null!=e[n[1]];r&&!a?t[i]="percent":!r&&a?t[i]="value":o?t[i]=o[i]:r&&(t[i]="percent")}))},o.prototype.noTarget=function(){return this._noTarget},o.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis((function(t,n){null==e&&(e=this.ecModel.getComponent(Ai(t),n))}),this),e},o.prototype.eachTargetAxis=function(e,t){this._targetAxisInfoMap.each((function(o,i){n(o.indexList,(function(n){e.call(t,i,n)}))}))},o.prototype.getAxisProxy=function(e,t){var n=this.getAxisModel(e,t);if(n)return n.__dzAxisProxy},o.prototype.getAxisModel=function(e,t){var n=this._targetAxisInfoMap.get(e);if(n&&n.indexMap[t])return this.ecModel.getComponent(Ai(e),t)},o.prototype.setRawRange=function(e){var t=this.option,o=this.settledOption;n([["start","startValue"],["end","endValue"]],(function(n){null==e[n[0]]&&null==e[n[1]]||(t[n[0]]=o[n[0]]=e[n[0]],t[n[1]]=o[n[1]]=e[n[1]])}),this),this._updateRangeUse(e)},o.prototype.setCalculatedRange=function(e){var t=this.option;n(["start","startValue","end","endValue"],(function(n){t[n]=e[n]}))},o.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},o.prototype.getValueRange=function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},o.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var t,n=this._targetAxisInfoMap.keys(),o=0;o<n.length;o++)for(var i=n[o],r=this._targetAxisInfoMap.get(i),a=0;a<r.indexList.length;a++){var s=this.getAxisProxy(i,r.indexList[a]);if(s.hostedBy(this))return s;t||(t=s)}return t},o.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},o.prototype.getOrient=function(){return this._orient},o.type="dataZoom",o.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],o.defaultOption={z:4,filterMode:"filter",start:0,end:100},o}(re);function Vi(e){var t={};return n(["start","end","startValue","endValue","throttle"],(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}var Li=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.type="dataZoom.select",n}(Di),zi=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.render=function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},n.type="dataZoom",n}(Ae),ki=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.type="dataZoom.select",n}(zi),Pi=n,Ni=Ge,Fi=function(){function e(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}return e.prototype.hostedBy=function(e){return this._dataZoomModel===e},e.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},e.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},e.prototype.getTargetSeriesModels=function(){var e=[];return this.ecModel.eachSeries((function(t){if(function(e){var t=e.get("coordinateSystem");return Le(Ci,t)>=0}(t)){var n=Ai(this._dimName),o=t.getReferringComponents(n,Y).models[0];o&&this._axisIndex===o.componentIndex&&e.push(t)}}),this),e},e.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},e.prototype.getMinMaxSpan=function(){return f(this._minMaxSpan)},e.prototype.calculateDataWindow=function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),r=[0,100],a=[],s=[];Pi(["start","end"],(function(l,u){var c=e[l],p=e[l+"Value"];"percent"===i[u]?(null==c&&(c=r[u]),p=o.parse(ke(c,r,n))):(t=!0,p=null==p?n[u]:o.parse(p),c=ke(p,n,r)),s[u]=null==p||isNaN(p)?n[u]:p,a[u]=null==c||isNaN(c)?r[u]:c})),Ni(s),Ni(a);var l=this._minMaxSpan;function u(e,t,n,i,r){var a=r?"Span":"ValueSpan";Vo(0,e,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)t[s]=ke(e[s],n,i,!0),r&&(t[s]=o.parse(t[s]))}return t?u(s,a,n,r,!1):u(a,s,r,n,!0),{valueWindow:s,percentWindow:a}},e.prototype.reset=function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,n){var o=[1/0,-1/0];Pi(n,(function(e){Ne(o,e.getData(),t)}));var i=e.getAxisModel(),r=Fe(i.axis.scale,i,o).calculate();return[r.min,r.max]}(this,this._dimName,t),this._updateMinMaxSpan();var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},e.prototype.filterData=function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),i=e.get("filterMode"),r=this._valueWindow;"none"!==i&&Pi(o,(function(e){var t=e.getData(),o=t.mapDimensionsAll(n);if(o.length){if("weakFilter"===i){var a=t.getStore(),s=c(o,(function(e){return t.getDimensionIndex(e)}),t);t.filterSelf((function(e){for(var t,n,i,l=0;l<o.length;l++){var u=a.get(s[l],e),c=!isNaN(u),p=u<r[0],h=u>r[1];if(c&&!p&&!h)return!0;c&&(i=!0),p&&(t=!0),h&&(n=!0)}return i&&t&&n}))}else Pi(o,(function(n){if("empty"===i)e.setData(t=t.map(n,(function(e){return function(e){return e>=r[0]&&e<=r[1]}(e)?e:NaN})));else{var o={};o[n]=r,t.selectRange(o)}}));Pi(o,(function(e){t.setApproximateExtent(r,e)}))}}))}},e.prototype._updateMinMaxSpan=function(){var e=this._minMaxSpan={},t=this._dataZoomModel,n=this._dataExtent;Pi(["min","max"],(function(o){var i=t.get(o+"Span"),r=t.get(o+"ValueSpan");null!=r&&(r=this.getAxisModel().axis.scale.parse(r)),null!=r?i=ke(n[0]+r,n,[0,100],!0):null!=i&&(r=ke(i,[0,100],n,!0)-n[0]),e[o+"Span"]=i,e[o+"ValueSpan"]=r}),this)},e.prototype._setAxisModel=function(){var e=this.getAxisModel(),t=this._percentWindow,n=this._valueWindow;if(t){var o=Pe(n,[0,500]);o=Math.min(o,20);var i=e.axis.scale.rawExtentInfo;0!==t[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(o)),100!==t[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(o)),i.freeze()}},e}();var Gi={getTargetSeries:function(e){function t(t){e.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(o,i){var r=e.getComponent(Ai(o),i);t(o,i,r,n)}))}))}t((function(e,t,n,o){n.__dzAxisProxy=null}));var o=[];t((function(t,n,i,r){i.__dzAxisProxy||(i.__dzAxisProxy=new Fi(t,n,r,e),o.push(i.__dzAxisProxy))}));var i=B();return n(o,(function(e){n(e.getTargetSeriesModels(),(function(e){i.set(e.uid,e)}))})),i},overallReset:function(e,t){e.eachComponent("dataZoom",(function(e){e.eachTargetAxis((function(t,n){e.getAxisProxy(t,n).reset(e)})),e.eachTargetAxis((function(n,o){e.getAxisProxy(n,o).filterData(e,t)}))})),e.eachComponent("dataZoom",(function(e){var t=e.findRepresentativeAxisProxy();if(t){var n=t.getDataPercentWindow(),o=t.getDataValueWindow();e.setCalculatedRange({start:n[0],end:n[1],startValue:o[0],endValue:o[1]})}}))}};var Ei=!1;function Bi(e){Ei||(Ei=!0,e.registerProcessor(e.PRIORITY.PROCESSOR.FILTER,Gi),function(e){e.registerAction("dataZoom",(function(e,t){var o=Ii(t,e);n(o,(function(t){t.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})}))}))}(e),e.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function Hi(e){e.registerComponentModel(Li),e.registerComponentView(ki),Bi(e)}var Zi=function(){return function(){}}(),Xi={};function Yi(e,t){Xi[e]=t}function Wi(e){return Xi[e]}var Ui=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t}return t(o,e),o.prototype.optionUpdated=function(){e.prototype.optionUpdated.apply(this,arguments);var t=this.ecModel;n(this.option.feature,(function(e,n){var o=Wi(n);o&&(o.getDefaultOption&&(o.defaultOption=o.getDefaultOption(t)),K(e,o.defaultOption))}))},o.type="toolbox",o.layoutMode={type:"box",ignoreSize:!0},o.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:ee.color.border,borderRadius:0,borderWidth:0,padding:ee.size.m,itemSize:15,itemGap:ee.size.s,showTitle:!0,iconStyle:{borderColor:ee.color.accent50,color:"none"},emphasis:{iconStyle:{borderColor:ee.color.accent50}},tooltip:{show:!1,position:"bottom"}},o}(re),ji=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.render=function(e,t,o,i){var r=this.group;if(r.removeAll(),e.get("show")){var a=+e.get("itemSize"),s="vertical"===e.get("orient"),l=e.get("feature")||{},u=this._features||(this._features={}),c=[];n(l,(function(e,t){c.push(t)})),new Ie(this._featureNames||[],c).add(g).update(g).remove(Re(g,null)).execute(),this._featureNames=c;var p=q(e,o).refContainer,h=e.getBoxLayoutParams(),d=e.get("padding"),f=$(h,p,d);Ye(e.get("orient"),r,e.get("itemGap"),f.width,f.height),We(r,h,p,d),r.add(Ue(r.getBoundingRect(),e)),s||r.eachChild((function(e){var t=e.__title,n=e.ensureState("emphasis"),i=n.textConfig||(n.textConfig={}),s=e.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!ie(l)&&t){var u=l.style||(l.style={}),c=je(t,Ze.makeFont(u)),p=e.x+r.x,h=!1;e.y+r.y+a+c.height>o.getHeight()&&(i.position="top",h=!0);var d=h?-5-c.height:a+10;p+c.width/2>o.getWidth()?(i.position=["100%",d],u.align="right"):p-c.width/2<0&&(i.position=[0,d],u.align="left")}}))}function g(p,h){var d,f=c[p],g=c[h],v=l[f],m=new oe(v,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===f&&(v.title=i.newTitle),f&&!g){if(function(e){return 0===e.indexOf("my")}(f))d={onclick:m.option.onclick,featureName:f};else{var _=Wi(f);if(!_)return;d=new _}u[f]=d}else if(!(d=u[g]))return;d.uid=fe("toolbox-feature"),d.model=m,d.ecModel=t,d.api=o;var x=d instanceof Zi;f||!g?!m.get("show")||x&&d.unusable?x&&d.remove&&d.remove(t,o):(!function(i,l,u){var c,p,h=i.getModel("iconStyle"),d=i.getModel(["emphasis","iconStyle"]),f=l instanceof Zi&&l.getIcons?l.getIcons():i.get("icon"),g=i.get("title")||{};y(f)?(c={})[u]=f:c=f;y(g)?(p={})[u]=g:p=g;var v=i.iconPaths={};n(c,(function(n,u){var c=He(n,{},{x:-a/2,y:-a/2,width:a,height:a});c.setStyle(h.getItemStyle()),c.ensureState("emphasis").style=d.getItemStyle();var f=new Ze({style:{text:p[u],align:d.get("textAlign"),borderRadius:d.get("textBorderRadius"),padding:d.get("textPadding"),fill:null,font:Xe({fontStyle:d.get("textFontStyle"),fontFamily:d.get("textFontFamily"),fontSize:d.get("textFontSize"),fontWeight:d.get("textFontWeight")},t)},ignore:!0});c.setTextContent(f),Me({el:c,componentModel:e,itemName:u,formatterParamsExtra:{title:p[u]}}),c.__title=p[u],c.on("mouseover",(function(){var t=d.getItemStyle(),n=s?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";f.setStyle({fill:d.get("textFill")||t.fill||t.stroke||ee.color.neutral99,backgroundColor:d.get("textBackgroundColor")}),c.setTextConfig({position:d.get("textPosition")||n}),f.ignore=!e.get("showTitle"),o.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",u])&&o.leaveEmphasis(this),f.hide()})),("emphasis"===i.get(["iconStatus",u])?Ee:Be)(c),r.add(c),c.on("click",ce(l.onclick,l,t,o,u)),v[u]=c}))}(m,d,f),m.setIconStatus=function(e,t){var n=this.option,o=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[e]=t,o[e]&&("emphasis"===t?Ee:Be)(o[e])},d instanceof Zi&&d.render&&d.render(m,t,o,i)):x&&d.dispose&&d.dispose(t,o)}},o.prototype.updateView=function(e,t,o,i){n(this._features,(function(e){e instanceof Zi&&e.updateView&&e.updateView(e.model,t,o,i)}))},o.prototype.remove=function(e,t){n(this._features,(function(n){n instanceof Zi&&n.remove&&n.remove(e,t)})),this.group.removeAll()},o.prototype.dispose=function(e,t){n(this._features,(function(n){n instanceof Zi&&n.dispose&&n.dispose(e,t)}))},o.type="toolbox",o}(Ae);var Ji=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",i="svg"===t.getZr().painter.getType(),r=i?"svg":n.get("type",!0)||"png",a=t.getConnectedDataURL({type:r,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||ee.color.neutral00,connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),s=Je.browser;if("function"!=typeof MouseEvent||!s.newEdge&&(s.ie||s.edge))if(window.navigator.msSaveOrOpenBlob||i){var l=a.split(","),u=l[0].indexOf("base64")>-1,c=i?decodeURIComponent(l[1]):l[1];u&&(c=window.atob(c));var p=o+"."+r;if(window.navigator.msSaveOrOpenBlob){for(var h=c.length,d=new Uint8Array(h);h--;)d[h]=c.charCodeAt(h);var f=new Blob([d]);window.navigator.msSaveOrOpenBlob(f,p)}else{var g=document.createElement("iframe");document.body.appendChild(g);var v=g.contentWindow,m=v.document;m.open("image/svg+xml","replace"),m.write(c),m.close(),v.focus(),m.execCommand("SaveAs",!0,p),document.body.removeChild(g)}}else{var y=n.get("lang"),_='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(y&&y[0]||"")+'" /></body>',x=window.open();x.document.write(_),x.document.title=o}else{var b=document.createElement("a");b.download=o+"."+r,b.target="_blank",b.href=a;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(M)}},n.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:ee.color.neutral00,name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},n}(Zi),Ki="__ec_magicType_stack__",qi=[["line","bar"],["stack"]],$i=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.getIcons=function(){var e=this.model,t=e.get("icon"),o={};return n(e.get("type"),(function(e){t[e]&&(o[e]=t[e])})),o},o.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},o.prototype.onclick=function(e,t,o){var i=this.model,r=i.get(["seriesIndex",o]);if(Qi[o]){var a,s={series:[]};n(qi,(function(e){Le(e,o)>=0&&n(e,(function(e){i.setIconStatus(e,"normal")}))})),i.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},(function(e){var t=e.subType,n=e.id,r=Qi[o](t,n,e,i);r&&(P(r,e.option),s.series.push(r));var a=e.coordinateSystem;if(a&&"cartesian2d"===a.type&&("line"===o||"bar"===o)){var l=a.getAxesByScale("ordinal")[0];if(l){var u=l.dim+"Axis",c=e.getReferringComponents(u,Y).models[0].componentIndex;s[u]=s[u]||[];for(var p=0;p<=c;p++)s[u][c]=s[u][c]||{};s[u][c].boundaryGap="bar"===o}}}));var l=o;"stack"===o&&(a=K({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",o])&&(l="tiled")),t.dispatchAction({type:"changeMagicType",currentType:l,newOption:s,newTitle:a,featureName:"magicType"})}},o}(Zi),Qi={line:function(e,t,n,o){if("bar"===e)return K({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","line"])||{},!0)},bar:function(e,t,n,o){if("line"===e)return K({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get(["option","bar"])||{},!0)},stack:function(e,t,n,o){var i=n.get("stack")===Ki;if("line"===e||"bar"===e)return o.setIconStatus("stack",i?"normal":"emphasis"),K({id:t,stack:i?"":Ki},o.get(["option","stack"])||{},!0)}};se({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(e,t){t.mergeOption(e.newOption)}));var er=new Array(60).join("-"),tr="\t";function nr(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var or=new RegExp("[\t]+","g");function ir(e,t){var o=e.split(new RegExp("\n*"+er+"\n*","g")),i={series:[]};return n(o,(function(e,n){if(function(e){if(e.slice(0,e.indexOf("\n")).indexOf(tr)>=0)return!0}(e)){var o=function(e){for(var t=e.split(/\n+/g),n=nr(t.shift()).split(or),o=[],i=c(n,(function(e){return{name:e,data:[]}})),r=0;r<t.length;r++){var a=nr(t[r]).split(or);o.push(a.shift());for(var s=0;s<a.length;s++)i[s]&&(i[s].data[r]=a[s])}return{series:i,categories:o}}(e),r=t[n],a=r.axisDim+"Axis";r&&(i[a]=i[a]||[],i[a][r.axisIndex]={data:o.categories},i.series=i.series.concat(o.series))}else{o=function(e){for(var t=e.split(/\n+/g),n=nr(t.shift()),o=[],i=0;i<t.length;i++){var r=nr(t[i]);if(r){var a=r.split(or),s="",l=void 0,u=!1;isNaN(a[0])?(u=!0,s=a[0],a=a.slice(1),o[i]={name:s,value:[]},l=o[i].value):l=o[i]=[];for(var c=0;c<a.length;c++)l.push(+a[c]);1===l.length&&(u?o[i].value=l[0]:o[i]=l[0])}}return{name:n,data:o}}(e);i.series.push(o)}})),i}var rr=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return t(o,e),o.prototype.onclick=function(e,t){setTimeout((function(){t.dispatchAction({type:"hideTip"})}));var o=t.getDom(),i=this.model;this._dom&&o.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||ee.color.neutral00;var a=document.createElement("h4"),s=i.get("lang")||[];a.innerHTML=s[0]||i.get("title"),a.style.cssText="margin:10px 20px",a.style.color=i.get("textColor");var l=document.createElement("div"),u=document.createElement("textarea");l.style.cssText="overflow:auto";var h=i.get("optionToContent"),d=i.get("contentToOption"),f=function(e){var t,o,i,r=function(e){var t={},n=[],o=[];return e.eachRawSeries((function(e){var i=e.coordinateSystem;if(!i||"cartesian2d"!==i.type&&"polar"!==i.type)n.push(e);else{var r=i.getBaseAxis();if("category"===r.type){var a=r.dim+"_"+r.index;t[a]||(t[a]={categoryAxis:r,valueAxis:i.getOtherAxis(r),series:[]},o.push({axisDim:r.dim,axisIndex:r.index})),t[a].series.push(e)}else n.push(e)}})),{seriesGroupByCategoryAxis:t,other:n,meta:o}}(e);return{value:p([(o=r.seriesGroupByCategoryAxis,i=[],n(o,(function(e,t){var o=e.categoryAxis,r=e.valueAxis.dim,a=[" "].concat(c(e.series,(function(e){return e.name}))),s=[o.model.getCategories()];n(e.series,(function(e){var t=e.getRawData();s.push(e.getRawData().mapArray(t.mapDimension(r),(function(e){return e})))}));for(var l=[a.join(tr)],u=0;u<s[0].length;u++){for(var p=[],h=0;h<s.length;h++)p.push(s[h][u]);l.push(p.join(tr))}i.push(l.join("\n"))})),i.join("\n\n"+er+"\n\n")),(t=r.other,c(t,(function(e){var t=e.getRawData(),n=[e.name],o=[];return t.each(t.dimensions,(function(){for(var e=arguments.length,i=arguments[e-1],r=t.getName(i),a=0;a<e-1;a++)o[a]=arguments[a];n.push((r?r+tr:"")+o.join(tr))})),n.join("\n")})).join("\n\n"+er+"\n\n"))],(function(e){return!!e.replace(/[\n\t\s]/g,"")})).join("\n\n"+er+"\n\n"),meta:r.meta}}(e);if(ie(h)){var g=h(t.getOption());y(g)?l.innerHTML=g:Ke(g)&&l.appendChild(g)}else{u.readOnly=i.get("readOnly");var v=u.style;v.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",v.color=i.get("textColor"),v.borderColor=i.get("textareaBorderColor"),v.backgroundColor=i.get("textareaColor"),u.value=f.value,l.appendChild(u)}var m=f.meta,_=document.createElement("div");_.style.cssText="position:absolute;bottom:5px;left:0;right:0";var x="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",b=document.createElement("div"),M=document.createElement("div");x+=";background-color:"+i.get("buttonColor"),x+=";color:"+i.get("buttonTextColor");var S=this;function w(){o.removeChild(r),S._dom=null}qe(b,"click",w),qe(M,"click",(function(){if(null==d&&null!=h||null!=d&&null==h)w();else{var e;try{e=ie(d)?d(l,t.getOption()):ir(u.value,m)}catch(n){throw w(),new Error("Data view format error "+n)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),w()}})),b.innerHTML=s[1],M.innerHTML=s[2],M.style.cssText=b.style.cssText=x,!i.get("readOnly")&&_.appendChild(M),_.appendChild(b),r.appendChild(a),r.appendChild(l),r.appendChild(_),l.style.height=o.clientHeight-80+"px",o.appendChild(r),this._dom=r},o.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},o.prototype.dispose=function(e,t){this.remove(e,t)},o.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:ee.color.background,textColor:ee.color.primary,textareaColor:ee.color.background,textareaBorderColor:ee.color.border,buttonColor:ee.color.accent50,buttonTextColor:ee.color.neutral00}},o}(Zi);function ar(e,t){return c(e,(function(e,n){var o=t&&t[n];if($e(o)&&!Qe(o)){$e(e)&&!Qe(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=P(e,o),i&&delete e.name,e}return e}))}se({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(e,t){var o=[];n(e.newOption.series,(function(e){var n=t.getSeriesByName(e.name)[0];if(n){var i=n.get("data");o.push({name:e.name,data:ar(e.data,i)})}else o.push(W({type:"scatter"},e))})),t.mergeOption(P({series:o},e.newOption))}));var sr=n,lr=ae();function ur(e){var t=lr(e);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var cr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.onclick=function(e,t){!function(e){lr(e).snapshots=null}(e),t.dispatchAction({type:"restore",from:this.uid})},n.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},n}(Zi);se({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(e,t){t.resetOption("recreate")}));var pr=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],hr=function(){function e(e,t,o){var i=this;this._targetInfoList=[];var r=fr(t,e);n(gr,(function(e,t){(!o||!o.include||Le(o.include,t)>=0)&&e(r,i._targetInfoList)}))}return e.prototype.setOutputRanges=function(e,t){return this.matchOutputRanges(e,t,(function(e,t,n){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var o=yr[e.brushType](0,n,t);e.__rangeOffset={offset:xr[e.brushType](o.values,e.range,[1,1]),xyMinMax:o.xyMinMax}}})),e},e.prototype.matchOutputRanges=function(e,t,o){n(e,(function(e){var i=this.findTargetInfo(e,t);i&&!0!==i&&n(i.coordSyses,(function(n){var i=yr[e.brushType](1,n,e.range,!0);o(e,i.values,n,t)}))}),this)},e.prototype.setInputRanges=function(e,t){n(e,(function(e){var n,o,i,r,a,s=this.findTargetInfo(e,t);if(e.range=e.range||[],s&&!0!==s){e.panelId=s.panelId;var l=yr[e.brushType](0,s.coordSys,e.coordRange),u=e.__rangeOffset;e.range=u?xr[e.brushType](l.values,u.offset,(n=l.xyMinMax,o=u.xyMinMax,i=Mr(n),r=Mr(o),a=[i[0]/r[0],i[1]/r[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}}),this)},e.prototype.makePanelOpts=function(e,t){return c(this._targetInfoList,(function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t?t(n):null,clipPath:bi(o),isTargetByCursor:Si(o,e,n.coordSysModel),getLinearBrushOtherExtent:Mi(o)}}))},e.prototype.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&Le(o.coordSyses,t.coordinateSystem)>=0},e.prototype.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=fr(t,e),i=0;i<n.length;i++){var r=n[i],a=e.panelId;if(a){if(r.panelId===a)return r}else for(var s=0;s<vr.length;s++)if(vr[s](o,r))return r}return!0},e}();function dr(e){return e[0]>e[1]&&e.reverse(),e}function fr(e,t){return et(e,t,{includeMainTypes:pr})}var gr={grid:function(e,t){var o=e.xAxisModels,i=e.yAxisModels,r=e.gridModels,a=B(),s={},l={};(o||i||r)&&(n(o,(function(e){var t=e.axis.grid.model;a.set(t.id,t),s[t.id]=!0})),n(i,(function(e){var t=e.axis.grid.model;a.set(t.id,t),l[t.id]=!0})),n(r,(function(e){a.set(e.id,e),s[e.id]=!0,l[e.id]=!0})),a.each((function(e){var r=e.coordinateSystem,a=[];n(r.getCartesians(),(function(e,t){(Le(o,e.getAxis("x").model)>=0||Le(i,e.getAxis("y").model)>=0)&&a.push(e)})),t.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:a[0],coordSyses:a,getPanelRect:mr.grid,xAxisDeclared:s[e.id],yAxisDeclared:l[e.id]})})))},geo:function(e,t){n(e.geoModels,(function(e){var n=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:n,coordSyses:[n],getPanelRect:mr.geo})}))}},vr=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,i=e.gridModel;return!i&&n&&(i=n.axis.grid.model),!i&&o&&(i=o.axis.grid.model),i&&i===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],mr={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(De(e)),t}},yr={lineX:Re(_r,0),lineY:Re(_r,1),rect:function(e,t,n,o){var i=e?t.pointToData([n[0][0],n[1][0]],o):t.dataToPoint([n[0][0],n[1][0]],o),r=e?t.pointToData([n[0][1],n[1][1]],o):t.dataToPoint([n[0][1],n[1][1]],o),a=[dr([i[0],r[0]]),dr([i[1],r[1]])];return{values:a,xyMinMax:a}},polygon:function(e,t,n,o){var i=[[1/0,-1/0],[1/0,-1/0]];return{values:c(n,(function(n){var r=e?t.pointToData(n,o):t.dataToPoint(n,o);return i[0][0]=Math.min(i[0][0],r[0]),i[1][0]=Math.min(i[1][0],r[1]),i[0][1]=Math.max(i[0][1],r[0]),i[1][1]=Math.max(i[1][1],r[1]),r})),xyMinMax:i}}};function _r(e,t,n,o){var i=n.getAxis(["x","y"][e]),r=dr(c([0,1],(function(e){return t?i.coordToData(i.toLocalCoord(o[e]),!0):i.toGlobalCoord(i.dataToCoord(o[e]))}))),a=[];return a[e]=r,a[1-e]=[NaN,NaN],{values:r,xyMinMax:a}}var xr={lineX:Re(br,0),lineY:Re(br,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return c(e,(function(e,o){return[e[0]-n[0]*t[o][0],e[1]-n[1]*t[o][1]]}))}};function br(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function Mr(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var Sr=n,wr=nt("toolbox-dataZoom_"),Tr=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n.prototype.render=function(e,t,n,o){this._brushController||(this._brushController=new Xo(n.getZr()),this._brushController.on("brush",ce(this._onBrush,this)).mount()),function(e,t,n,o,i){var r=n._isZoomActive;o&&"takeGlobalCursor"===o.type&&(r="dataZoomSelect"===o.key&&o.dataZoomSelectActive);n._isZoomActive=r,e.setIconStatus("zoom",r?"emphasis":"normal");var a=new hr(Ar(e),t,{include:["grid"]}),s=a.makePanelOpts(i,(function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!r||!s.length)&&{brushType:"auto",brushStyle:e.getModel("brushStyle").getItemStyle()})}(e,t,this,o,n),function(e,t){e.setIconStatus("back",function(e){return ur(e).length}(t)>1?"emphasis":"normal")}(e,t)},n.prototype.onclick=function(e,t,n){Cr[n].call(this)},n.prototype.remove=function(e,t){this._brushController&&this._brushController.unmount()},n.prototype.dispose=function(e,t){this._brushController&&this._brushController.dispose()},n.prototype._onBrush=function(e){var t=e.areas;if(e.isEnd&&t.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new hr(Ar(this.model),o,{include:["grid"]}).matchOutputRanges(t,o,(function(e,t,n){if("cartesian2d"===n.type){var o=e.brushType;"rect"===o?(i("x",n,t[0]),i("y",n,t[1])):i({lineX:"x",lineY:"y"}[o],n,t)}})),function(e,t){var n=ur(e);sr(t,(function(t,o){for(var i=n.length-1;i>=0&&!n[i][o];i--);if(i<0){var r=e.queryComponents({mainType:"dataZoom",subType:"select",id:o})[0];if(r){var a=r.getPercentRange();n[0][o]={dataZoomId:o,start:a[0],end:a[1]}}}})),n.push(t)}(o,n),this._dispatchZoomAction(n)}function i(e,t,i){var r=t.getAxis(e),a=r.model,s=function(e,t,n){var o;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(e,t.componentIndex)&&(o=n)})),o}(e,a,o),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(i=Vo(0,i.slice(),r.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:i[0],endValue:i[1]})}},n.prototype._dispatchZoomAction=function(e){var t=[];Sr(e,(function(e,n){t.push(f(e))})),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},n.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:ee.color.backgroundTint}}},n}(Zi),Cr={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var t=ur(e),n=t[t.length-1];t.length>1&&t.pop();var o={};return sr(n,(function(e,n){for(var i=t.length-1;i>=0;i--)if(e=t[i][n]){o[n]=e;break}})),o}(this.ecModel))}};function Ar(e){var t={xAxisIndex:e.get("xAxisIndex",!0),yAxisIndex:e.get("yAxisIndex",!0),xAxisId:e.get("xAxisId",!0),yAxisId:e.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}function Ir(e){e.registerComponentModel(Ui),e.registerComponentView(ji),Yi("saveAsImage",Ji),Yi("magicType",$i),Yi("dataView",rr),Yi("dataZoom",Tr),Yi("restore",cr),ot(Hi)}tt("dataZoom",(function(e){var t=e.getComponent("toolbox",0),n=["feature","dataZoom"];if(t&&null!=t.get(n)){var o=t.getModel(n),i=[],r=Ar(o),a=et(e,r);return Sr(a.xAxisModels,(function(e){return s(e,"xAxis","xAxisIndex")})),Sr(a.yAxisModels,(function(e){return s(e,"yAxis","yAxisIndex")})),i}function s(e,t,n){var r=e.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:o.get("filterMode",!0)||"filter",id:wr+t+r};a[n]=r,i.push(a)}}));var Rr=n,Or=$e,Dr=-1,Vr=function(){function e(t){var o=t.mappingMethod,i=t.type,r=this.option=f(t);this.type=i,this.mappingMethod=o,this._normalizeData=Hr[o];var a=e.visualHandlers[i];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._normalizedToVisual=a._normalizedToVisual[o],"piecewise"===o?(Lr(r),function(e){var t=e.pieceList;e.hasSpecialVisual=!1,n(t,(function(t,n){t.originIndex=n,null!=t.visual&&(e.hasSpecialVisual=!0)}))}(r)):"category"===o?r.categories?function(e){var t=e.categories,n=e.categoryMap={},o=e.visual;if(Rr(t,(function(e,t){n[e]=t})),!Qe(o)){var i=[];$e(o)?Rr(o,(function(e,t){var o=n[t];i[null!=o?o:Dr]=e})):i[-1]=o,o=Br(e,i)}for(var r=t.length-1;r>=0;r--)null==o[r]&&(delete n[t[r]],t.pop())}(r):Lr(r,!0):(H("linear"!==o||r.dataExtent),Lr(r))}return e.prototype.mapValueToVisual=function(e){var t=this._normalizeData(e);return this._normalizedToVisual(t,e)},e.prototype.getNormalizer=function(){return ce(this._normalizeData,this)},e.listVisualTypes=function(){return _(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(e,t,o){$e(e)?n(e,t,o):t.call(o,e)},e.mapVisual=function(t,n,o){var i,r=Qe(t)?[]:$e(t)?{}:(i=!0,null);return e.eachVisual(t,(function(e,t){var a=n.call(o,e,t);i?r=a:r[t]=a})),r},e.retrieveVisuals=function(t){var n,o={};return t&&Rr(e.visualHandlers,(function(e,i){t.hasOwnProperty(i)&&(o[i]=t[i],n=!0)})),n?o:null},e.prepareVisualTypes=function(e){if(Qe(e))e=e.slice();else{if(!Or(e))return[];var t=[];Rr(e,(function(e,n){t.push(n)})),e=t}return e.sort((function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1})),e},e.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},e.findPieceIndex=function(e,t,n){for(var o,i=1/0,r=0,a=t.length;r<a;r++){var s=t[r].value;if(null!=s){if(s===e||y(s)&&s===e+"")return r;n&&p(s,r)}}for(r=0,a=t.length;r<a;r++){var l=t[r],u=l.interval,c=l.close;if(u){if(u[0]===-1/0){if(Zr(c[1],e,u[1]))return r}else if(u[1]===1/0){if(Zr(c[0],u[0],e))return r}else if(Zr(c[0],u[0],e)&&Zr(c[1],e,u[1]))return r;n&&p(u[0],r),n&&p(u[1],r)}}if(n)return e===1/0?t.length-1:e===-1/0?0:o;function p(t,n){var r=Math.abs(t-e);r<i&&(i=r,o=n)}},e.visualHandlers={color:{applyVisual:Pr("color"),getColorMapper:function(){var e=this.option;return ce("category"===e.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),Nr.call(this,e)}:function(t,n,o){var i=!!o;return!n&&(t=this._normalizeData(t)),o=it(t,e.parsedVisual,o),i?o:k(o,"rgba")},this)},_normalizedToVisual:{linear:function(e){return k(it(e,this.option.parsedVisual),"rgba")},category:Nr,piecewise:function(e,t){var n=Er.call(this,t);return null==n&&(n=k(it(e,this.option.parsedVisual),"rgba")),n},fixed:Fr}},colorHue:zr((function(e,t){return at(e,t)})),colorSaturation:zr((function(e,t){return at(e,null,t)})),colorLightness:zr((function(e,t){return at(e,null,null,t)})),colorAlpha:zr((function(e,t){return st(e,t)})),decal:{applyVisual:Pr("decal"),_normalizedToVisual:{linear:null,category:Nr,piecewise:null,fixed:null}},opacity:{applyVisual:Pr("opacity"),_normalizedToVisual:Gr([0,1])},liftZ:{applyVisual:Pr("liftZ"),_normalizedToVisual:{linear:Fr,category:Fr,piecewise:Fr,fixed:Fr}},symbol:{applyVisual:function(e,t,n){n("symbol",this.mapValueToVisual(e))},_normalizedToVisual:{linear:kr,category:Nr,piecewise:function(e,t){var n=Er.call(this,t);return null==n&&(n=kr.call(this,e)),n},fixed:Fr}},symbolSize:{applyVisual:Pr("symbolSize"),_normalizedToVisual:Gr([0,1])}},e}();function Lr(e,t){var n=e.visual,o=[];$e(n)?Rr(n,(function(e){o.push(e)})):null!=n&&o.push(n);t||1!==o.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(o[1]=o[0]),Br(e,o)}function zr(e){return{applyVisual:function(t,n,o){var i=this.mapValueToVisual(t);o("color",e(n("color"),i))},_normalizedToVisual:Gr([0,1])}}function kr(e){var t=this.option.visual;return t[Math.round(ke(e,[0,1],[0,t.length-1],!0))]||{}}function Pr(e){return function(t,n,o){o(e,this.mapValueToVisual(t))}}function Nr(e){var t=this.option.visual;return t[this.option.loop&&e!==Dr?e%t.length:e]}function Fr(){return this.option.visual[0]}function Gr(e){return{linear:function(t){return ke(t,e,this.option.visual,!0)},category:Nr,piecewise:function(t,n){var o=Er.call(this,n);return null==o&&(o=ke(t,e,this.option.visual,!0)),o},fixed:Fr}}function Er(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var o=n[Vr.findPieceIndex(e,n)];if(o&&o.visual)return o.visual[this.type]}}function Br(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=c(t,(function(e){var t=L(e);return t||[0,0,0,1]}))),t}var Hr={linear:function(e){return ke(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Vr.findPieceIndex(e,t,!0);if(null!=n)return ke(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?Dr:t},fixed:le};function Zr(e,t,n){return e?t<=n:t<n}var Xr=n;function Yr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function Wr(e,t,n){var o={};return Xr(t,(function(t){var i,r=o[t]=((i=function(){}).prototype.__hidden=i.prototype,new i);Xr(e[t],(function(e,o){if(Vr.isValidType(o)){var i={type:o,visual:e};n&&n(i,t),r[o]=new Vr(i),"opacity"===o&&((i=f(i)).type="colorAlpha",r.__hidden.__alphaForOpacity=new Vr(i))}}))})),o}function Ur(e,t,o){var i;n(o,(function(e){t.hasOwnProperty(e)&&Yr(t[e])&&(i=!0)})),i&&n(o,(function(n){t.hasOwnProperty(n)&&Yr(t[n])?e[n]=f(t[n]):delete e[n]}))}function jr(e,t,o,i,r,a){var s,l={};function u(e){return lt(o,s,e)}function c(e,t){ut(o,s,e,t)}n(e,(function(e){var n=Vr.prepareVisualTypes(t[e]);l[e]=n})),o.each((function(e,n){s=e;var a=o.getRawDataItem(s);if(a&&!1===a.visualMap)return;for(var p=i.call(r,e),h=t[p],d=l[p],f=0,g=d.length;f<g;f++){var v=d[f];h[v]&&h[v].applyVisual(e,u,c)}}))}var Jr=function(e,t,n){var o=f((Kr[e]||{})[t]);return n&&Qe(o)?o[o.length-1]:o},Kr={color:{active:["#006edd","#e0ffff"],inactive:[ee.color.transparent]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},qr=Vr.mapVisual,$r=Vr.eachVisual,Qr=Qe,ea=n,ta=Ge,na=ke,oa=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t.stateList=["inRange","outOfRange"],t.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],t.layoutMode={type:"box",ignoreSize:!0},t.dataBound=[-1/0,1/0],t.targetVisuals={},t.controllerVisuals={},t}return t(o,e),o.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n)},o.prototype.optionUpdated=function(e,t){var n=this.option;!t&&Ur(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},o.prototype.resetVisual=function(e){var t=this.stateList;e=ce(e,this),this.controllerVisuals=Wr(this.option.controller,t,e),this.targetVisuals=Wr(this.option.target,t,e)},o.prototype.getItemSymbol=function(){return null},o.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesId,t=this.option.seriesIndex;null==t&&null==e&&(t="all");var n=ct(this.ecModel,"series",{index:t,id:e},{useDefault:!1,enableAll:!0,enableNone:!1}).models;return c(n,(function(e){return e.componentIndex}))},o.prototype.eachTargetSeries=function(e,t){n(this.getTargetSeriesIndices(),(function(n){var o=this.ecModel.getSeriesByIndex(n);o&&e.call(t,o)}),this)},o.prototype.isTargetSeries=function(e){var t=!1;return this.eachTargetSeries((function(n){n===e&&(t=!0)})),t},o.prototype.formatValueText=function(e,t,n){var o,i=this.option,r=i.precision,a=this.dataBound,s=i.formatter;n=n||["<",">"],Qe(e)&&(e=e.slice(),o=!0);var l=t?e:o?[u(e[0]),u(e[1])]:u(e);return y(s)?s.replace("{value}",o?l[0]:l).replace("{value2}",o?l[1]:l):ie(s)?o?s(e[0],e[1]):s(e):o?e[0]===a[0]?n[0]+" "+l[1]:e[1]===a[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function u(e){return e===a[0]?"min":e===a[1]?"max":(+e).toFixed(Math.min(r,20))}},o.prototype.resetExtent=function(){var e=this.option,t=ta([e.min,e.max]);this._dataExtent=t},o.prototype.getDataDimensionIndex=function(e){var t=this.option.dimension;if(null!=t)return e.getDimensionIndex(t);for(var n=e.dimensions,o=n.length-1;o>=0;o--){var i=n[o],r=e.getDimensionInfo(i);if(!r.isCalculationCoord)return r.storeDimIndex}},o.prototype.getExtent=function(){return this._dataExtent.slice()},o.prototype.completeVisualOption=function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},o=t.target||(t.target={}),i=t.controller||(t.controller={});K(o,n),K(i,n);var r=this.isCategory();function a(n){Qr(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")}}a.call(this,o),a.call(this,i),function(e,t,n){var o=e[t],i=e[n];o&&!i&&(i=e[n]={},ea(o,(function(e,t){if(Vr.isValidType(t)){var n=Jr(t,"inactive",r);null!=n&&(i[t]=n,"color"!==t||i.hasOwnProperty("opacity")||i.hasOwnProperty("colorAlpha")||(i.opacity=[0,0]))}})))}.call(this,o,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,o=this.get("inactiveColor"),i=this.getItemSymbol()||"roundRect";ea(this.stateList,(function(a){var s=this.itemSize,l=e[a];l||(l=e[a]={color:r?o:[o]}),null==l.symbol&&(l.symbol=t&&f(t)||(r?i:[i])),null==l.symbolSize&&(l.symbolSize=n&&f(n)||(r?s[0]:[s[0],s[0]])),l.symbol=qr(l.symbol,(function(e){return"none"===e?i:e}));var u=l.symbolSize;if(null!=u){var c=-1/0;$r(u,(function(e){e>c&&(c=e)})),l.symbolSize=qr(u,(function(e){return na(e,[0,c],[0,s[0]],!0)}))}}),this)}.call(this,i)},o.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},o.prototype.isCategory=function(){return!!this.option.categories},o.prototype.setSelected=function(e){},o.prototype.getSelected=function(){return null},o.prototype.getValueState=function(e){return null},o.prototype.getVisualMeta=function(e){return null},o.type="visualMap",o.dependencies=["series"],o.defaultOption={show:!0,z:4,min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:ee.color.transparent,borderColor:ee.color.borderTint,contentColor:ee.color.theme[0],inactiveColor:ee.color.disabled,borderWidth:0,padding:ee.size.m,textGap:10,precision:0,textStyle:{color:ee.color.secondary}},o}(re),ia=[20,140],ra=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t}return t(o,e),o.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},o.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var t=this.itemSize;(null==t[0]||isNaN(t[0]))&&(t[0]=ia[0]),(null==t[1]||isNaN(t[1]))&&(t[1]=ia[1])},o.prototype._resetRange=function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):Qe(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},o.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),n(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=t[1]/3)}),this)},o.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},o.prototype.getSelected=function(){var e=this.getExtent(),t=Ge((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},o.prototype.getValueState=function(e){var t=this.option.range,n=this.getExtent(),o=Z(this.option.unboundedRange,!0);return(o&&t[0]<=n[0]||t[0]<=e)&&(o&&t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},o.prototype.findTargetDataIndices=function(e){var t=[];return this.eachTargetSeries((function(n){var o=[],i=n.getData();i.each(this.getDataDimensionIndex(i),(function(t,n){e[0]<=t&&t<=e[1]&&o.push(n)}),this),t.push({seriesId:n.id,dataIndex:o})}),this),t},o.prototype.getVisualMeta=function(e){var t=aa(this,"outOfRange",this.getExtent()),n=aa(this,"inRange",this.option.range.slice()),o=[];function i(t,n){o.push({value:t,color:e(t,n)})}for(var r=0,a=0,s=n.length,l=t.length;a<l&&(!n.length||t[a]<=n[0]);a++)t[a]<n[r]&&i(t[a],"outOfRange");for(var u=1;r<s;r++,u=0)u&&o.length&&i(n[r],"outOfRange"),i(n[r],"inRange");for(u=1;a<l;a++)(!n.length||n[n.length-1]<t[a])&&(u&&(o.length&&i(o[o.length-1].value,"outOfRange"),u=0),i(t[a],"outOfRange"));var c=o.length;return{stops:o,outerColors:[c?o[0].color:"transparent",c?o[c-1].color:"transparent"]}},o.type="visualMap.continuous",o.defaultOption=pt(oa.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:ee.color.neutral00,borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:ee.color.neutral00,borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:ee.color.shadow}}),o}(oa);function aa(e,t,n){if(n[0]===n[1])return n.slice();for(var o=(n[1]-n[0])/200,i=n[0],r=[],a=0;a<=200&&i<n[1];a++)r.push(i),i+=o;return r.push(n[1]),r}var sa=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t.autoPositionValues={left:1,right:1,top:1,bottom:1},t}return t(o,e),o.prototype.init=function(e,t){this.ecModel=e,this.api=t},o.prototype.render=function(e,t,n,o){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,t,n,o):this.group.removeAll()},o.prototype.renderBackground=function(e){var t=this.visualMapModel,n=ht(t.get("padding")||0),o=e.getBoundingRect();e.add(new b({z2:-1,silent:!0,shape:{x:o.x-n[3],y:o.y-n[0],width:o.width+n[3]+n[1],height:o.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},o.prototype.getControllerVisual=function(e,t,o){var i=(o=o||{}).forceState,r=this.visualMapModel,a={};if("color"===t){var s=r.get("contentColor");a.color=s}function l(e){return a[e]}function u(e,t){a[e]=t}var c=r.controllerVisuals[i||r.getValueState(e)],p=Vr.prepareVisualTypes(c);return n(p,(function(n){var i=c[n];o.convertOpacityToAlpha&&"opacity"===n&&(n="colorAlpha",i=c.__alphaForOpacity),Vr.dependsOn(n,t)&&i&&i.applyVisual(e,l,u)})),a[t]},o.prototype.positionGroup=function(e){var t=this.visualMapModel,n=this.api,o=q(t,n).refContainer;We(e,t.getBoxLayoutParams(),o)},o.prototype.doRender=function(e,t,n,o){},o.type="visualMap",o}(Ae),la=[["left","right","width"],["top","bottom","height"]];function ua(e,t,n){var o=e.option,i=o.align;if(null!=i&&"auto"!==i)return i;for(var r={width:t.getWidth(),height:t.getHeight()},a="horizontal"===o.orient?1:0,s=la[a],l=[0,null,10],u={},c=0;c<3;c++)u[la[1-a][c]]=l[c],u[s[c]]=2===c?n[0]:o[s[c]];var p=[["x","width",3],["y","height",0]][a],h=$(u,r,o.padding);return s[(h.margin[p[2]]||0)+h[p[0]]+.5*h[p[1]]<.5*r[p[1]]?0:1]}function ca(e,t){return n(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}var pa=ke,ha=n,da=Math.min,fa=Math.max,ga=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t._shapes={},t._dataInterval=[],t._handleEnds=[],t._hoverLinkDataIndices=[],t}return t(n,e),n.prototype.init=function(t,n){e.prototype.init.call(this,t,n),this._hoverLinkFromSeriesMouseOver=ce(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=ce(this._hideIndicator,this)},n.prototype.doRender=function(e,t,n,o){o&&"selectDataRange"===o.type&&o.from===this.uid||this._buildView()},n.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},n.prototype._renderEndsText=function(e,t,n){if(t){var o=t[1-n];o=null!=o?o+"":"";var i=this.visualMapModel,r=i.get("textGap"),a=i.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===n?-r:a[1]+r],s),u=this._applyTransform(0===n?"bottom":"top",s),c=this._orient,p=this.visualMapModel.textStyleModel;this.group.add(new Ze({style:dt(p,{x:l[0],y:l[1],verticalAlign:p.get("verticalAlign")||("horizontal"===c?"middle":u),align:p.get("align")||("horizontal"===c?u:"center"),text:o})}))}},n.prototype._renderBar=function(e){var t=this.visualMapModel,n=this._shapes,o=t.itemSize,i=this._orient,r=this._useHandle,a=ua(t,this.api,o),s=n.mainGroup=this._createBarGroup(a),l=new x;s.add(l),l.add(n.outOfRange=va()),l.add(n.inRange=va(null,r?ya(this._orient):null,ce(this._dragHandle,this,"all",!1),ce(this._dragHandle,this,"all",!0))),l.setClipPath(new b({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var u=t.textStyleModel.getTextRect("国"),c=fa(u.width,u.height);r&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(t,s,0,o,c,i),this._createHandle(t,s,1,o,c,i)),this._createIndicator(t,s,o,c,i),e.add(s)},n.prototype._createHandle=function(e,t,n,o,i,r){var a=ce(this._dragHandle,this,n,!1),s=ce(this._dragHandle,this,n,!0),l=ft(e.get("handleSize"),o[0]),u=gt(e.get("handleIcon"),-l/2,-l/2,l,l,null,!0),c=ya(this._orient);u.attr({cursor:c,draggable:!0,drift:a,ondragend:s,onmousemove:function(e){he(e.event)}}),u.x=o[0]/2,u.useStyle(e.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),vt(u,!0),t.add(u);var p=this.visualMapModel.textStyleModel,h=new Ze({cursor:c,draggable:!0,drift:a,onmousemove:function(e){he(e.event)},ondragend:s,style:dt(p,{x:0,y:0,text:""})});h.ensureState("blur").style={opacity:.1},h.stateTransition={duration:200},this.group.add(h);var d=[l,0],f=this._shapes;f.handleThumbs[n]=u,f.handleLabelPoints[n]=d,f.handleLabels[n]=h},n.prototype._createIndicator=function(e,t,n,o,i){var r=ft(e.get("indicatorSize"),n[0]),a=gt(e.get("indicatorIcon"),-r/2,-r/2,r,r,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=e.getModel("indicatorStyle").getItemStyle();if(a instanceof R){var l=a.style;a.useStyle(W({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else a.useStyle(s);t.add(a);var u=this.visualMapModel.textStyleModel,c=new Ze({silent:!0,invisible:!0,style:dt(u,{x:0,y:0,text:""})});this.group.add(c);var p=[("horizontal"===i?o/2:6)+n[0]/2,0],h=this._shapes;h.indicator=a,h.indicatorLabel=c,h.indicatorLabelPoint=p,this._firstShowIndicator=!0},n.prototype._dragHandle=function(e,t,n,o){if(this._useHandle){if(this._dragging=!t,!t){var i=this._applyTransform([n,o],this._shapes.mainGroup,!0);this._updateInterval(e,i[1]),this._hideIndicator(),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():ma(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},n.prototype._resetInterval=function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),o=[0,e.itemSize[1]];this._handleEnds=[pa(t[0],n,o,!0),pa(t[1],n,o,!0)]},n.prototype._updateInterval=function(e,t){t=t||0;var n=this.visualMapModel,o=this._handleEnds,i=[0,n.itemSize[1]];Vo(t,o,i,e,0);var r=n.getExtent();this._dataInterval=[pa(o[0],i,r,!0),pa(o[1],i,r,!0)]},n.prototype._updateView=function(e){var t=this.visualMapModel,n=t.getExtent(),o=this._shapes,i=[0,t.itemSize[1]],r=e?i:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,r,"inRange"),s=this._createBarVisual(n,n,i,"outOfRange");o.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),o.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(r,a)},n.prototype._createBarVisual=function(e,t,n,o){var i={forceState:o,convertOpacityToAlpha:!0},r=this._makeColorGradient(e,i),a=[this.getControllerVisual(e[0],"symbolSize",i),this.getControllerVisual(e[1],"symbolSize",i)],s=this._createBarPoints(n,a);return{barColor:new D(0,0,0,1,r),barPoints:s,handlesColor:[r[0].color,r[r.length-1].color]}},n.prototype._makeColorGradient=function(e,t){var n=[],o=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var i=1;i<100;i++){var r=e[0]+o*i;if(r>e[1])break;n.push({color:this.getControllerVisual(r,"color",t),offset:i/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},n.prototype._createBarPoints=function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},n.prototype._createBarGroup=function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new x("horizontal"!==t||n?"horizontal"===t&&n?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==t||n?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},n.prototype._updateHandle=function(e,t){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,i=n.handleThumbs,r=n.handleLabels,a=o.itemSize,s=o.getExtent(),l=this._applyTransform("left",n.mainGroup);ha([0,1],(function(u){var c=i[u];c.setStyle("fill",t.handlesColor[u]),c.y=e[u];var p=pa(e[u],[0,a[1]],s,!0),h=this.getControllerVisual(p,"symbolSize");c.scaleX=c.scaleY=h/a[0],c.x=a[0]-h/2;var d=mt(n.handleLabelPoints[u],De(c,this.group));if("horizontal"===this._orient){var f="left"===l||"top"===l?(a[0]-h)/2:(a[0]-h)/-2;d[1]+=f}r[u].setStyle({x:d[0],y:d[1],text:o.formatValueText(this._dataInterval[u]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},n.prototype._showIndicator=function(e,t,n,o){var i=this.visualMapModel,r=i.getExtent(),a=i.itemSize,s=[0,a[1]],l=this._shapes,u=l.indicator;if(u){u.attr("invisible",!1);var c=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),p=this.getControllerVisual(e,"symbolSize"),h=pa(e,r,s,!0),d=a[0]-p/2,f={x:u.x,y:u.y};u.y=h,u.x=d;var g=mt(l.indicatorLabelPoint,De(u,this.group)),v=l.indicatorLabel;v.attr("invisible",!1);var m=this._applyTransform("left",l.mainGroup),y="horizontal"===this._orient;v.setStyle({text:(n||"")+i.formatValueText(t),verticalAlign:y?m:"middle",align:y?"center":m});var _={x:d,y:h,style:{fill:c}},x={style:{x:g[0],y:g[1]}};if(i.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var b={duration:100,easing:"cubicInOut",additive:!0};u.x=f.x,u.y=f.y,u.animateTo(_,b),v.animateTo(x,b)}else u.attr(_),v.attr(x);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var S=0;S<M.length;S++)this.api.enterBlur(M[S])}},n.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,o=e._applyTransform([t.offsetX,t.offsetY],e._shapes.mainGroup,!0,!0);o[1]=da(fa(0,o[1]),n[1]),e._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}})).on("mouseout",(function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()}))},n.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},n.prototype._doHoverLinkToSeries=function(e,t){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var i=[0,o[1]],r=n.getExtent();e=da(fa(i[0],e),i[1]);var a=function(e,t,n){var o=6,i=e.get("hoverLinkDataSize");i&&(o=pa(i,t,n,!0)/2);return o}(n,r,i),s=[e-a,e+a],l=pa(e,i,r,!0),u=[pa(s[0],i,r,!0),pa(s[1],i,r,!0)];s[0]<i[0]&&(u[0]=-1/0),s[1]>i[1]&&(u[1]=1/0),t&&(u[0]===-1/0?this._showIndicator(l,u[1],"< ",a):u[1]===1/0?this._showIndicator(l,u[0],"> ",a):this._showIndicator(l,l,"≈ ",a));var c=this._hoverLinkDataIndices,p=[];(t||ma(n))&&(p=this._hoverLinkDataIndices=n.findTargetDataIndices(u));var h=yt(c,p);this._dispatchHighDown("downplay",ca(h[0],n)),this._dispatchHighDown("highlight",ca(h[1],n))}},n.prototype._hoverLinkFromSeriesMouseOver=function(e){var t;if(Ce(e.target,(function(e){var n=be(e);if(null!=n.dataIndex)return t=n,!0}),!0),t){var n=this.ecModel.getSeriesByIndex(t.seriesIndex),o=this.visualMapModel;if(o.isTargetSeries(n)){var i=n.getData(t.dataType),r=i.getStore().get(o.getDataDimensionIndex(i),t.dataIndex);isNaN(r)||this._showIndicator(r,r)}}},n.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var t=this._shapes.handleLabels;if(t)for(var n=0;n<t.length;n++)this.api.leaveBlur(t[n])},n.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",ca(e,this.visualMapModel)),e.length=0},n.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},n.prototype._applyTransform=function(e,t,n,o){var i=De(t,o?null:this.group);return Qe(e)?mt(e,i,n):Oe(e,i,n)},n.prototype._dispatchHighDown=function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},n.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},n.type="visualMap.continuous",n}(sa);function va(e,t,n,o){return new A({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(e){he(e.event)},ondragend:o})}function ma(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function ya(e){return"vertical"===e?"ns-resize":"ew-resize"}var _a={type:"selectDataRange",event:"dataRangeSelected",update:"update"},xa=function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))},ba=[{createOnAllSeries:!0,reset:function(e,t){var o=[];return t.eachComponent("visualMap",(function(t){var i,r,a,s,l,u=e.pipelineContext;!t.isTargetSeries(e)||u&&u.large||o.push((i=t.stateList,r=t.targetVisuals,a=ce(t.getValueState,t),s=t.getDataDimensionIndex(e.getData()),l={},n(i,(function(e){var t=Vr.prepareVisualTypes(r[e]);l[e]=t})),{progress:function(e,t){var n,o;function i(e){return lt(t,o,e)}function u(e,n){ut(t,o,e,n)}null!=s&&(n=t.getDimensionIndex(s));for(var c=t.getStore();null!=(o=e.next());){var p=t.getRawDataItem(o);if(!p||!1!==p.visualMap)for(var h=null!=s?c.get(n,o):o,d=a(h),f=r[d],g=l[d],v=0,m=g.length;v<m;v++){var y=g[v];f[y]&&f[y].applyVisual(h,i,u)}}}}))})),o}},{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),o=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var i=t.getVisualMeta(ce(Ma,null,e,t))||{stops:[],outerColors:[]},r=t.getDataDimensionIndex(n);r>=0&&(i.dimension=r,o.push(i))}})),e.getData().setVisual("visualMeta",o)}}];function Ma(e,t,n,o){for(var i=t.targetVisuals[o],r=Vr.prepareVisualTypes(i),a={color:_t(e.getData(),"color")},s=0,l=r.length;s<l;s++){var u=r[s],c=i["opacity"===u?"__alphaForOpacity":u];c&&c.applyVisual(n,p,h)}return a.color;function p(e){return a[e]}function h(e,t){a[e]=t}}var Sa=n;function wa(e){var t=e&&e.visualMap;Qe(t)||(t=t?[t]:[]),Sa(t,(function(e){if(e){Ta(e,"splitList")&&!Ta(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&Qe(t)&&Sa(t,(function(e){$e(e)&&(Ta(e,"start")&&!Ta(e,"min")&&(e.min=e.start),Ta(e,"end")&&!Ta(e,"max")&&(e.max=e.end))}))}}))}function Ta(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var Ca=!1;function Aa(e){Ca||(Ca=!0,e.registerSubTypeDefaulter("visualMap",(function(e){return e.categories||(e.pieces?e.pieces.length>0:e.splitNumber>0)&&!e.calculable?"piecewise":"continuous"})),e.registerAction(_a,xa),n(ba,(function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)})),e.registerPreprocessor(wa))}function Ia(e){e.registerComponentModel(ra),e.registerComponentView(ga),Aa(e)}var Ra=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t._pieceList=[],t}return t(o,e),o.prototype.optionUpdated=function(t,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],Oa[this._mode].call(this,this._pieceList),this._resetSelected(t,n);var i=this.option.categories;this.resetVisual((function(e,t){"categories"===o?(e.mappingMethod="category",e.categories=f(i)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=c(this._pieceList,(function(e){return e=f(e),"inRange"!==t&&(e.visual=null),e})))}))},o.prototype.completeVisualOption=function(){var t=this.option,o={},i=Vr.listVisualTypes(),r=this.isCategory();function a(e,t,n){return e&&e[t]&&e[t].hasOwnProperty(n)}n(t.pieces,(function(e){n(i,(function(t){e.hasOwnProperty(t)&&(o[t]=1)}))})),n(o,(function(e,o){var i=!1;n(this.stateList,(function(e){i=i||a(t,e,o)||a(t.target,e,o)}),this),!i&&n(this.stateList,(function(e){(t[e]||(t[e]={}))[o]=Jr(o,"inRange"===e?"active":"inactive",r)}))}),this),e.prototype.completeVisualOption.apply(this,arguments)},o.prototype._resetSelected=function(e,t){var o=this.option,i=this._pieceList,r=(t?o:e).selected||{};if(o.selected=r,n(i,(function(e,t){var n=this.getSelectedMapKey(e);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===o.selectedMode){var a=!1;n(i,(function(e,t){var n=this.getSelectedMapKey(e);r[n]&&(a?r[n]=!1:a=!0)}),this)}},o.prototype.getItemSymbol=function(){return this.get("itemSymbol")},o.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},o.prototype.getPieceList=function(){return this._pieceList},o.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},o.prototype.setSelected=function(e){this.option.selected=f(e)},o.prototype.getValueState=function(e){var t=Vr.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},o.prototype.findTargetDataIndices=function(e){var t=[],n=this._pieceList;return this.eachTargetSeries((function(o){var i=[],r=o.getData();r.each(this.getDataDimensionIndex(r),(function(t,o){Vr.findPieceIndex(t,n)===e&&i.push(o)}),this),t.push({seriesId:o.id,dataIndex:i})}),this),t},o.prototype.getRepresentValue=function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},o.prototype.getVisualMeta=function(e){if(!this.isCategory()){var t=[],o=["",""],i=this,r=this._pieceList.slice();if(r.length){var a=r[0].interval[0];a!==-1/0&&r.unshift({interval:[-1/0,a]}),(a=r[r.length-1].interval[1])!==1/0&&r.push({interval:[a,1/0]})}else r.push({interval:[-1/0,1/0]});var s=-1/0;return n(r,(function(e){var t=e.interval;t&&(t[0]>s&&l([s,t[0]],"outOfRange"),l(t.slice()),s=t[1])}),this),{stops:t,outerColors:o}}function l(n,r){var a=i.getRepresentValue({interval:n});r||(r=i.getValueState(a));var s=e(a,r);n[0]===-1/0?o[0]=s:n[1]===1/0?o[1]=s:t.push({value:n[0],color:s},{value:n[1],color:s})}},o.type="visualMap.piecewise",o.defaultOption=pt(oa.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),o}(oa),Oa={splitNumber:function(e){var t=this.option,o=Math.min(t.precision,20),i=this.getExtent(),r=t.splitNumber;r=Math.max(parseInt(r,10),1),t.splitNumber=r;for(var a=(i[1]-i[0])/r;+a.toFixed(o)!==a&&o<5;)o++;t.precision=o,a=+a.toFixed(o),t.minOpen&&e.push({interval:[-1/0,i[0]],close:[0,0]});for(var s=0,l=i[0];s<r;l+=a,s++){var u=s===r-1?i[1]:l+a;e.push({interval:[l,u],close:[1,1]})}t.maxOpen&&e.push({interval:[i[1],1/0],close:[0,0]}),xt(e),n(e,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(e){var t=this.option;n(t.categories,(function(t){e.push({text:this.formatValueText(t,!0),value:t})}),this),Da(t,e)},pieces:function(e){var t=this.option;n(t.pieces,(function(t,n){$e(t)||(t={value:t});var o={text:"",index:n};if(null!=t.label&&(o.text=t.label),t.hasOwnProperty("value")){var i=o.value=t.value;o.interval=[i,i],o.close=[1,1]}else{for(var r=o.interval=[],a=o.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],c=0;c<2;c++){for(var p=[["gte","gt","min"],["lte","lt","max"]][c],h=0;h<3&&null==r[c];h++)r[c]=t[p[h]],a[c]=s[h],u[c]=2===h;null==r[c]&&(r[c]=l[c])}u[0]&&r[1]===1/0&&(a[0]=0),u[1]&&r[0]===-1/0&&(a[1]=0),r[0]===r[1]&&a[0]&&a[1]&&(o.value=r[0])}o.visual=Vr.retrieveVisuals(t),e.push(o)}),this),Da(t,e),xt(e),n(e,(function(e){var t=e.close,n=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,n)}),this)}};function Da(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}var Va=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t}return t(o,e),o.prototype.doRender=function(){var e=this.group;e.removeAll();var t=this.visualMapModel,o=t.get("textGap"),i=t.textStyleModel,r=this._getItemAlign(),a=t.itemSize,s=this._getViewData(),l=s.endsText,u=J(t.get("showLabel",!0),!l),c=!t.get("selectedMode");l&&this._renderEndsText(e,l[0],a,u,r),n(s.viewPieceList,(function(n){var s=n.piece,l=new x;l.onclick=ce(this._onItemClick,this,s),this._enableHoverLink(l,n.indexInModelPieceList);var p=t.getRepresentValue(s);if(this._createItemSymbol(l,p,[0,0,a[0],a[1]],c),u){var h=this.visualMapModel.getValueState(p),d=i.get("align")||r;l.add(new Ze({style:dt(i,{x:"right"===d?-o:a[0]+o,y:a[1]/2,text:s.text,verticalAlign:i.get("verticalAlign")||"middle",align:d,opacity:Z(i.get("opacity"),"outOfRange"===h?.5:1)}),silent:c}))}e.add(l)}),this),l&&this._renderEndsText(e,l[1],a,u,r),Ye(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},o.prototype._enableHoverLink=function(e,t){var n=this;e.on("mouseover",(function(){return o("highlight")})).on("mouseout",(function(){return o("downplay")}));var o=function(e){var o=n.visualMapModel;o.option.hoverLink&&n.api.dispatchAction({type:e,batch:ca(o.findTargetDataIndices(t),o)})}},o.prototype._getItemAlign=function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return ua(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},o.prototype._renderEndsText=function(e,t,n,o,i){if(t){var r=new x,a=this.visualMapModel.textStyleModel;r.add(new Ze({style:dt(a,{x:o?"right"===i?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:o?i:"center",text:t})})),e.add(r)}},o.prototype._getViewData=function(){var e=this.visualMapModel,t=c(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),n=e.get("text"),o=e.get("orient"),i=e.get("inverse");return("horizontal"===o?i:!i)?t.reverse():n&&(n=n.slice().reverse()),{viewPieceList:t,endsText:n}},o.prototype._createItemSymbol=function(e,t,n,o){var i=gt(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color"));i.silent=o,e.add(i)},o.prototype._onItemClick=function(e){var t=this.visualMapModel,o=t.option,i=o.selectedMode;if(i){var r=f(o.selected),a=t.getSelectedMapKey(e);"single"===i||!0===i?(r[a]=!0,n(r,(function(e,t){r[t]=t===a}))):r[a]=!r[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}},o.type="visualMap.piecewise",o}(sa);function La(e){e.registerComponentModel(Ra),e.registerComponentView(Va),Aa(e)}function za(e){ot(Ia),ot(La)}var ka=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.render=function(e,t,n,o){if(!o||"mapToggleSelect"!==o.type||o.from!==this.uid){var i=this.group;if(i.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&o&&"geoRoam"===o.type&&this._mapDraw.resetForLabelLayout(),o&&"geoRoam"===o.type&&"series"===o.componentType&&o.seriesId===e.id)(r=this._mapDraw)&&i.add(r.group);else if(e.needsDrawMap){var r=this._mapDraw||new Mo(n);i.add(r.group),r.draw(e,t,n,this,o),this._mapDraw=r}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},n.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},n.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},n.prototype._renderSymbols=function(e,t,n){var o=e.originalData,i=this.group;o.each(o.mapDimension("value"),(function(t,n){if(!isNaN(t)){var r=o.getItemLayout(n);if(r&&r.point){var a=r.point,s=r.offset,l=new w({style:{fill:e.getData().getVisual("style").fill},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:bt+1)});if(!s){var u=e.mainSeries.getData(),c=o.getName(n),p=u.indexOfName(c),h=o.getItemModel(n),d=h.getModel("label"),f=u.getItemGraphicEl(p);_e(l,xe(h),{labelFetcher:{getFormattedLabel:function(t,n){return e.getFormattedLabel(p,n)}},defaultText:c}),l.disableLabelAnimation=!0,d.get("position")||l.setTextConfig({position:"bottom"}),f.onHoverStateChange=function(e){Mt(l,e)}}i.add(l)}}}))},n.type="map",n}(St),Pa=function(e){function o(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.type,t.needsDrawMap=!1,t.seriesGroup=[],t.getTooltipPosition=function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,o=n.getRegion(t);return o&&n.dataToPoint(o.getCenter())}},t}return t(o,e),o.prototype.getInitialData=function(e){for(var t=wt(this,{coordDimensions:["value"],encodeDefaulter:Re(Tt,this)}),o=B(),i=[],r=0,a=t.count();r<a;r++){var s=t.getName(r);o.set(s,r)}var l=Yn(this.getMapType(),this.option.nameMap,this.option.nameProperty);return n(l.regions,(function(e){var n,r=e.name,a=o.get(r),s=e.properties&&e.properties.echartsStyle;null==a?(n={name:r},i.push(n)):n=t.getRawDataItem(a),s&&K(n,s)})),t.appendData(i),t},o.prototype.getHostGeoModel=function(){if(Ct(this).kind!==At.boxCoordSys)return this.getReferringComponents("geo",{useDefault:!1,enableAll:!1,enableNone:!1}).models[0]},o.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},o.prototype.getRawValue=function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},o.prototype.getRegionModel=function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},o.prototype.formatTooltip=function(e,t,n){for(var o=this.getData(),i=this.getRawValue(e),r=o.getName(e),a=this.seriesGroup,s=[],l=0;l<a.length;l++){var u=a[l].originalData.indexOfName(r),c=o.mapDimension("value");isNaN(a[l].originalData.get(c,u))||s.push(a[l].name)}return It("section",{header:s.join(", "),noHeader:!s.length,blocks:[It("nameValue",{name:r,value:i})]})},o.prototype.setZoom=function(e){this.option.zoom=e},o.prototype.setCenter=function(e){this.option.center=e},o.prototype.getLegendIcon=function(e){var t=e.icon||"roundRect",n=gt(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.style.stroke="none",t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill=ee.color.neutral00,n.style.lineWidth=2),n},o.type="series.map",o.dependencies=["geo"],o.layoutMode="box",o.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:ee.color.tertiary},itemStyle:{borderWidth:.5,borderColor:ee.color.border,areaColor:ee.color.background},emphasis:{label:{show:!0,color:ee.color.primary},itemStyle:{areaColor:ee.color.highlight}},select:{label:{show:!0,color:ee.color.primary},itemStyle:{color:ee.color.highlight}},nameProperty:"name"},o}(Rt);function Na(e){var t={};e.eachSeriesByType("map",(function(e){var n=e.getHostGeoModel(),o=n?"o"+n.id:"i"+e.getMapType();(t[o]=t[o]||[]).push(e)})),n(t,(function(e,t){for(var o,i,r,a=(o=c(e,(function(e){return e.getData()})),i=e[0].get("mapValueCalculation"),r={},n(o,(function(e){e.each(e.mapDimension("value"),(function(t,n){var o="ec-"+e.getName(n);r[o]=r[o]||[],isNaN(t)||r[o].push(t)}))})),o[0].map(o[0].mapDimension("value"),(function(e,t){for(var n="ec-"+o[0].getName(t),a=0,s=1/0,l=-1/0,u=r[n].length,c=0;c<u;c++)s=Math.min(s,r[n][c]),l=Math.max(l,r[n][c]),a+=r[n][c];return 0===u?NaN:"min"===i?s:"max"===i?l:"average"===i?a/u:a}))),s=0;s<e.length;s++)e[s].originalData=e[s].getData();for(s=0;s<e.length;s++)e[s].seriesGroup=e,e[s].needsDrawMap=0===s&&!e[s].getHostGeoModel(),e[s].setData(a.cloneShallow()),e[s].mainSeries=e[0]}))}function Fa(e){var t={};e.eachSeriesByType("map",(function(o){var i=o.getMapType();if(!o.getHostGeoModel()&&!t[i]){var r={};n(o.seriesGroup,(function(t){var n=t.coordinateSystem,o=t.originalData;t.get("showLegendSymbol")&&e.getComponent("legend")&&o.each(o.mapDimension("value"),(function(e,t){var i=o.getName(t),a=n.getRegion(i);if(a&&!isNaN(e)){var s=r[i]||0,l=n.dataToPoint(a.getCenter());r[i]=s+1,o.setItemLayout(t,{point:l,offset:s})}}))}));var a=o.getData();a.each((function(e){var t=a.getName(e),n=a.getItemLayout(e)||{};n.showLabel=!r[t],a.setItemLayout(e,n)})),t[i]=!0}}))}function Ga(e){ot(Do),e.registerChartView(ka),e.registerSeriesModel(Pa),e.registerLayout(Fa),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,Na),Ot("map",e.registerAction)}function Ea(e,t){var n=t.rippleEffectColor||t.color;e.eachChild((function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})}))}var Ba=function(e){function n(t,n){var o=e.call(this)||this,i=new Dt(t,n),r=new x;return o.add(i),o.add(r),o.updateData(t,n),o}return t(n,e),n.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},n.prototype.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,o=e.rippleNumber,i=this.childAt(1),r=0;r<o;r++){var a=gt(t,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-r/o*e.period+e.effectOffset;a.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(s).start(),a.animateStyle(!0).when(e.period,{opacity:0}).delay(s).start(),i.add(a)}Ea(i,e)},n.prototype.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),o=["symbolType","period","rippleScale","rippleNumber"],i=0;i<o.length;i++){var r=o[i];if(t[r]!==e[r])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}Ea(n,e)},n.prototype.highlight=function(){Ee(this)},n.prototype.downplay=function(){Be(this)},n.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},n.prototype.updateData=function(e,t){var n=this,o=e.hostModel;this.childAt(0).updateData(e,t);var i=this.childAt(1),r=e.getItemModel(t),a=e.getItemVisual(t,"symbol"),s=Vt(e.getItemVisual(t,"symbolSize")),l=e.getItemVisual(t,"style"),u=l&&l.fill,c=r.getModel("emphasis");i.setScale(s),i.traverse((function(e){e.setStyle("fill",u)}));var p=Lt(e.getItemVisual(t,"symbolOffset"),s);p&&(i.x=p[0],i.y=p[1]);var h=e.getItemVisual(t,"symbolRotate");i.rotation=(h||0)*Math.PI/180||0;var d={};d.showEffectOn=o.get("showEffectOn"),d.rippleScale=r.get(["rippleEffect","scale"]),d.brushType=r.get(["rippleEffect","brushType"]),d.period=1e3*r.get(["rippleEffect","period"]),d.effectOffset=t/e.count(),d.z=o.getShallow("z")||0,d.zlevel=o.getShallow("zlevel")||0,d.symbolType=a,d.color=u,d.rippleEffectColor=r.get(["rippleEffect","color"]),d.rippleNumber=r.get(["rippleEffect","number"]),"render"===d.showEffectOn?(this._effectCfg?this.updateEffectAnimation(d):this.startEffectAnimation(d),this._effectCfg=d):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(e){"emphasis"===e?"render"!==d.showEffectOn&&n.startEffectAnimation(d):"normal"===e&&"render"!==d.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=d,Se(this,c.get("focus"),c.get("blurScope"),c.get("disabled"))},n.prototype.fadeOut=function(e){e&&e()},n}(x),Ha=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t}return t(n,e),n.prototype.init=function(){this._symbolDraw=new zt(Ba)},n.prototype.render=function(e,t,n){var o=e.getData(),i=this._symbolDraw;i.updateData(o,{clipShape:this._getClipShape(e)}),this.group.add(i.group)},n.prototype._getClipShape=function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},n.prototype.updateTransform=function(e,t,n){var o=e.getData();this.group.dirty();var i=kt("").reset(e,t,n);i.progress&&i.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout()},n.prototype._updateGroupTransform=function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Pt(t.getRoamTransform()),this.group.decomposeTransform())},n.prototype.remove=function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0)},n.type="effectScatter",n}(St),Za=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.type,t.hasSymbolVisual=!0,t}return t(n,e),n.prototype.getInitialData=function(e,t){return Nt(null,this,{useEncodeDefaulter:!0})},n.prototype.brushSelector=function(e,t,n){return n.point(t.getItemLayout(e))},n.type="series.effectScatter",n.dependencies=["grid","polar"],n.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},n}(Rt);function Xa(e){e.registerChartView(Ha),e.registerSeriesModel(Za),e.registerLayout(kt("effectScatter"))}export{Xo as B,Di as D,ro as R,Zi as T,sn as V,Si as a,Mi as b,Gt as c,Wr as d,jr as e,hr as f,Yi as g,Ri as h,zi as i,Bi as j,Ai as k,tn as l,bi as m,Vr as n,qt as o,$t as p,Ga as q,Ur as r,Vo as s,Xa as t,Qt as u,Do as v,Ir as w,za as x,Ia as y,La as z};
